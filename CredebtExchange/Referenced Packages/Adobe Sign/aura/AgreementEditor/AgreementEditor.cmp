<aura:component controller="echosign_dev1.AgreementComponentController"
                implements="force:appHostable"
                description="Represents an agreement component."
                extensible="true">
    
    <link href='/resource/echosign_dev1__SLDS/SLDS/assets/styles/salesforce-lightning-design-system-vf.css' rel="stylesheet"/>
    <link href='/resource/echosign_dev1__jqueryui1111/jquery-ui-1.11.1/jquery-ui.min.css' rel="stylesheet"/>
    
    <!-- <ltng:require scripts="/resource/echosign_dev1__jquery224,/resource/echosign_dev1__jqueryui1111/jquery-ui-1.11.1/jquery-ui.min.js,/resource/echosign_dev1__momentjs" afterScriptsLoaded="{!c.afterScriptsLoaded}"/> -->
    <ltng:require scripts="/resource/echosign_dev1__jqueryui1111/jquery-ui-1.11.1/external/jquery/jquery.js,/resource/echosign_dev1__jqueryui1111/jquery-ui-1.11.1/jquery-ui.min.js,/support/console/36.0/integration.js" afterScriptsLoaded="{!c.afterScriptsLoaded}"/>
    
    <aura:handler name="notifyDocumentsSelected" event="echosign_dev1:DocumentSelectedEvent" action="{!c.onDocumentSelected}"/>
    <aura:handler name="notifyTemplatesSelected" event="echosign_dev1:FormFieldTemplateSelectedEvent" action="{!c.onTemplateSelected}"/>
     
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    
    <aura:attribute name="agreementWrapper" type="echosign_dev1.AgreementWrapper" description="Reference to the internal agreement record which was loaded." />
    <aura:attribute name="agreementName" type="String" />
    <aura:attribute name="agreementStatus" type="String" />
    <aura:attribute name="agreementMessage" type="String" />
    <aura:attribute name="agreementCc" type="String" />
    <aura:attribute name="agreementReminder" type="String" />
    <aura:attribute name="agreementReminderLabel" type="String" />
    <aura:attribute name="agreementSignOrder" type="String" />
    <aura:attribute name="agreementSignOrderLabel" type="String" />
    <aura:attribute name="agreementLanguage" type="String" />
    <aura:attribute name="agreementLanguageLabel" type="String" />
    <aura:attribute name="agreementHosted" type="Boolean" />
    <aura:attribute name="agreementSenderSigns" type="Boolean" />
    <aura:attribute name="agreementAuthoring" type="Boolean" />
    <aura:attribute name="agreementViewPassword" type="Boolean" />
    <aura:attribute name="viewPassword" type="String" />
    <aura:attribute name="viewPasswordConfirm" type="String" />
    <aura:attribute name="signPassword" type="String" />
    <aura:attribute name="signPasswordExternal" type="String" />
    <aura:attribute name="signPasswordInternal" type="String" />
    <aura:attribute name="signPasswordConfirm" type="String" />
    <aura:attribute name="signPasswordExternalConfirm" type="String" />
    <aura:attribute name="signPasswordInternalConfirm" type="String" />
    <aura:attribute name="recipientWrappers" type="echosign_dev1.RecipientWrapper" />
    <aura:attribute name="attachmentWrappers" type="echosign_dev1.AttachmentWrapper" />
    <!-- <aura:attribute name="templateWrappers" type="echosign_dev1.FormFieldTemplateWrapper" /> -->
    <aura:attribute name="searchItemWrappers" type="echosign_dev1.SObjectItemWrapper" />
    <aura:attribute name="agreementTemplates" type="String" />
    
    <aura:attribute name="selectedRecipientIndex" type="Integer" />
    <aura:attribute name="recipientPassword" type="String" />
    <aura:attribute name="recipientConfirmPassword" type="String" />
    <aura:attribute name="selectedRecipientWrapper" type="echosign_dev1.RecipientWrapper" />
    <aura:attribute name="replacementRecipientWrapper" type="echosign_dev1.RecipientWrapper" />
    
    <aura:attribute name="settingsWrapper" type="echosign_dev1.SettingsWrapper" />    
    <aura:attribute name="schemaWrapper" type="echosign_dev1.SchemaWrapper" />
    
    <aura:attribute name="templateId" type="String" description="The template ID of the template record." />
    <aura:attribute name="masterId" type="String" description="The master ID of the master record." />
    <aura:attribute name="agreementId" type="String" description="The ID of the agreement record." />
    <aura:attribute name="actionName" type="String" description="The name of the action to invoke on the agreement record." />
    
    <aura:attribute name="httpProtocolOptions" type="String[]" default="http://,https://"/>
                          
    <aura:attribute name="agreementActionError" type="String" />
    
    <aura:attribute name="calendarWeeks" type="echosign_dev1.CalendarWeek" />
    <aura:attribute name="expirePickerSelectedMonth" type="String" />
    <aura:attribute name="expirePickerSelectedMonthValue" type="String" />
    <aura:attribute name="expirePickerSelectedYearValue" type="String" />
    <aura:attribute name="isCurrentMonth" type="Boolean" />
    
    <aura:attribute name="isIe11" type="Boolean" default="false" />
    <aura:attribute name="isSafari" type="Boolean" default="false" />
    <aura:attribute name="isFirefox" type="Boolean" default="false" />
    <aura:attribute name="isMacOs" type="Boolean" default="false" />
    
    <aura:attribute name="isSent" type="Boolean" />
    <aura:attribute name="isNotSent" type="Boolean" default="{! !isSent }" />
    <aura:attribute name="isError" type="Boolean" default="false" />
    <aura:attribute name="isLoading" type="Boolean" default="true" />
    <aura:attribute name="isLogout" type="Boolean" default="false" />
    <aura:attribute name="isShowAddDocumentsDialog" type="Boolean" default="false" />
    <aura:attribute name="isShowAddTemplatesDialog" type="Boolean" default="false" />
    <aura:attribute name="isViewPasswordSetStarted" type="Boolean" default="false" />
    <aura:attribute name="isSignPasswordSetStarted" type="Boolean" default="false" />
    <aura:attribute name="isSignInternalPasswordSetStarted" type="Boolean" default="false" />
    <aura:attribute name="isSignExternalPasswordSetStarted" type="Boolean" default="false" />
    <aura:attribute name="isRecipientVerificationPasswordStarted" type="Boolean" default="false" />
    
    <aura:attribute name="errorMessage" type="String" />
    <aura:attribute name="isNoDocumentsError" type="Boolean" default="false" />
    <aura:attribute name="isNoRecipientsError" type="Boolean" default="false" />
    <aura:attribute name="isViewPasswordError" type="Boolean" default="false" />
    <aura:attribute name="viewPasswordError" type="Boolean" default="false" />
    <aura:attribute name="isSignPasswordError" type="Boolean" default="false" />
    <aura:attribute name="signPasswordError" type="Boolean" default="false" />
    <aura:attribute name="isSignInternalPasswordError" type="Boolean" default="false" />
    <aura:attribute name="signInternalPasswordError" type="Boolean" default="false" />
    <aura:attribute name="isSignExternalPasswordError" type="Boolean" default="false" />
    <aura:attribute name="signExternalPasswordError" type="Boolean" default="false" />
    <aura:attribute name="storeRecipientVerificationDisabled" type="Boolean" default="false" />
    <aura:attribute name="storeReplaceRecipientDisabled" type="Boolean" default="true" />
    
    <aura:attribute name="searchTerm" type="String" default="true" />
    
    <!-- get rid of this once listeners are hooked into starrtup -->
    <aura:attribute name="listenersInit" type="Boolean" default="false" />
    
    <iframe height="0" width="0" src="https://secure.echosign.com/public/logout" style="visibility:hidden;display:none"></iframe>
	
    <div class="slds">
        <div class="main slds-m-bottom--large" role="main">
            <div id="replaceRecipientDialog" class="slds-hide">
                <div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <h2 class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_Replace_Signer_Header }</h2>
                            <button onclick="{! c.hideReplaceRecipientDialog }" class="slds-button slds-modal__close">
                                <echosign_dev1:svgIcon class="slds-button__icon slds-button__icon--inverse slds-button__icon--large esign-icon-markup" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                <span class="slds-assistive-text"></span>
                            </button>
                        </div>
                        <div class="slds-modal__content">
                            <div class="slds-form--stacked">
                                <aura:if isTrue="{! v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Email' }">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__control">
                                            <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                <div class="slds-form-element">
                                                    <div id="replaceRecipientLookupInputPanel" class="slds-grid slds-form-element__control">
                                                        <div id="replaceRecipientTypeInput" onclick="{!c.toggleReplaceRecipientType}" class="slds-dropdown-trigger slds-align-middle esign-recipient-type-input">              
                                                            <aura:if isTrue="{! v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Contact' }">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Lead' }">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'User' }">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                            </aura:if>
                                                            
                                                            <button id="replaceRecipientTypeButton" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                                <span class="slds-assistive-text"></span>
                                                            </button>
                                                        </div>
                                                        <aura:if isTrue="{! !v.replacementRecipientWrapper.isRecipientSet }">
                                                            <input id="replaceRecipientInputLookup" class="slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="" placeholder="{! v.replacementRecipientWrapper.searchRecipientWrapper }" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! v.replacementRecipientWrapper.isRecipientSet }">
                                                            <button onclick="{!c.navToReplaceRecipient}" class="slds-button esign-recipient-value">{! v.replacementRecipientWrapper.name }</button>
                                                            <input disabled="disabled" class="slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="">
                                                            </input>
                                                        </aura:if>
                                                            <div class="slds-p-right--medium slds-p-top--x-small">
                                                                <aura:if isTrue="{! !v.replacementRecipientWrapper.isRecipientSet }">
                                                                    <button onclick="{!c.searchReplaceRecipient}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </aura:if>
                                                                <aura:if isTrue="{! v.replacementRecipientWrapper.isRecipientSet }">
                                                                    <button onclick="{!c.selectUnsetReplaceRecipient}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#close" category="utility" size="small" name="close" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </aura:if>
                                                            </div>
                                                    </div>
                                                    <div class="slds-pill-container slds-hide"></div>
                                                </div>
                                                
                                                <div id="replaceRecipientTypeDropdown" class="slds-lookup__menu esign-menu-align-left slds-hide" role="listbox">
                                                    <ul class="slds-lookup__list" role="presentation">
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Contact_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Contact' ) }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectContactReplaceRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                                    {! $Label.echosign_dev1.Contact_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Lead_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Lead' ) }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectLeadReplaceRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                                    {! $Label.echosign_dev1.Lead_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_User_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'User' ) }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectUserReplaceRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                    {! $Label.echosign_dev1.User_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <li class="slds-lookup__item">
                                                            <a id="s01" onclick="{!c.onSelectEmailReplaceRecipientType}" role="option">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#email" category="action" size="small" name="email" />
                                                                {! $Label.echosign_dev1.Email_Recipient_Label }</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                
                                                <div id="replaceRecipientSearchResults" class="slds-lookup__menu esign-menu-align-left slds-hide" role="listbox">
                                                    <ul id="replaceRecipientSearchResultsList" class="slds-lookup__list" role="presentation">
                                                        <aura:iteration items="{!v.searchItemWrappers}" var="searchItemWrapper">
                                                            <li class="slds-lookup__item" ><a onclick="{!c.selectReplaceRecipientSearchResult}" data-order="{!searchItemWrapper.recordId}" role="option">{!searchItemWrapper.name}</a></li>
                                                        </aura:iteration>
                                                    </ul>
                                                </div>
                                                
                                            </div>
                                            
                                        </div>                 
                                        <div class="slds-form-element__control slds-m-top--medium">
                                            <input id="email" class="esign-input-readonly slds-input" type="email" placeholder="" value="{! v.replacementRecipientWrapper.email == null ? $Label.echosign_dev1.Agreement_Editor_Email_Fax_Label : v.replacementRecipientWrapper.email }" readonly="readonly" />
                                        </div>
                                    </div>
                                </aura:if>
                                
                                <aura:if isTrue="{! v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Email' }">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__control slds-size--1-of-1">
                                            <div id="replaceRecipientTypeInput" onclick="{!c.toggleReplaceRecipientType}" class="esign-recipient-email-type">
                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#email" category="standard" size="small" name="email" />           
                                                <button class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                    <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                            </div>
                                            <!-- <input id="replaceRecipientEmailInput" class="slds-input esign-recipient-email-input" type="email" placeholder="Enter Email Address" value="{! v.replacementRecipientWrapper.email }" /> -->                           
                                            <ui:inputEmail aura:id="replaceRecipientEmailInput" change="{!c.onReplaceRecipientMessageChange}" class="slds-input esign-recipient-email-input" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Email_Address_Placeholder }" value="{! v.replacementRecipientWrapper.email }" />          
                                        </div>
                                        
                                        <div id="replaceRecipientTypeDropdown" class="slds-lookup__menu esign-menu-align-left esign-menu-narrow slds-hide" role="listbox">
                                            <ul class="slds-lookup__list" role="presentation">
                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Contact_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Contact' ) }">
                                                    <li class="slds-lookup__item">
                                                        <a id="s01" onclick="{!c.onSelectContactReplaceRecipientType}" role="option">
                                                            <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                            {! $Label.echosign_dev1.Contact_Recipient_Label }</a>
                                                    </li>
                                                </aura:if>
                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Lead_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Lead' ) }">
                                                    <li class="slds-lookup__item">
                                                        <a id="s01" onclick="{!c.onSelectLeadReplaceRecipientType}" role="option">
                                                            <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                            {! $Label.echosign_dev1.Lead_Recipient_Label }</a>
                                                    </li>
                                                </aura:if>
                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_User_Recipient_Type__c, v.replacementRecipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'User' ) }">
                                                    <li class="slds-lookup__item">
                                                        <a id="s01" onclick="{!c.onSelectUserReplaceRecipientType}" role="option">
                                                            <echosign_dev1:svgIcon class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                            {! $Label.echosign_dev1.User_Recipient_Label }</a>
                                                    </li>
                                                </aura:if>
                                            </ul>
                                        </div>
                                    </div>
                                </aura:if>
                                <div class="slds-form-element slds-m-top--medium">
                                    <div class="slds-form-element__control">
                                        <ui:inputTextArea aura:id="replaceRecipientMessage" keyup="{!c.onReplaceRecipientMessageChange}" change="{!c.onReplaceRecipientMessageChange}" label="" class="slds-textarea" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Message_Placeholder }" rows="5"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-modal__footer">
                            <button disabled="{! v.storeReplaceRecipientDisabled }" onclick="{!c.onReplaceRecipientSubmit}" class="slds-m-left--medium slds-button slds-button--brand slds-float--right">{! $Label.echosign_dev1.Replace_Signer_Button_Label }</button>
                            <button onclick="{!c.hideReplaceRecipientDialog}" class="slds-button slds-button--neutral slds-float--right">{! $Label.echosign_dev1.Cancel_Button_Label }</button>
                        </div>
                    </div>
                </div>
                <div class="slds-modal-backdrop slds-modal-backdrop--open"></div>
            </div>
            <div id="recipientMessageDialog" class="slds-hide">
                <div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <h2 class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_Recipient_Message_Header }</h2>
                            <button onclick="{! c.toggleRecipientMessageDialog }" class="slds-button slds-modal__close">
                                <echosign_dev1:svgIcon class="slds-button__icon slds-button__icon--inverse slds-button__icon--large esign-icon-markup" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                <span class="slds-assistive-text"></span>
                            </button>
                        </div>
                        <div class="slds-modal__content">
                            <div class="slds-form--stacked">
                                <div class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <ui:inputTextArea aura:id="recipientMessage" label="" class="slds-textarea" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Message_Placeholder }" rows="5"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-modal__footer">
                            <button onclick="{!c.onSetRecipientMessage}" class="slds-button slds-button--brand slds-float--right slds-m-left--small">{! $Label.echosign_dev1.Save_Button_Label }</button>
                            <button onclick="{!c.toggleRecipientMessageDialog}" class="slds-button slds-button--neutral slds-float--right">{! $Label.echosign_dev1.Cancel_Button_Label }</button>
                        </div>
                    </div>
                </div>
                <div class="slds-modal-backdrop slds-modal-backdrop--open"></div>
            </div> 
            <div id="cancelAgreementDialog" class="slds-hide">
                <div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open esign-modal-small">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <h2 class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_Cancel_Agreement_Header }</h2>
                            <button onclick="{! c.toggleCancelAgreementDialog }" class="slds-button slds-modal__close">
                                <echosign_dev1:svgIcon class="slds-button__icon slds-button__icon--inverse slds-button__icon--large esign-icon-markup" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                <span class="slds-assistive-text"></span>
                            </button>
                        </div>
                        <div class="slds-modal__content">
                            <div class="slds-form--stacked">
                                <div class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <ui:inputTextArea aura:id="cancelAgreementReason" label="" class="slds-textarea" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Optional_Reason_Placeholder }" rows="5"/>
                                    </div>
                                </div>
                                <div class="slds-form-element">
                                    <ui:inputCheckbox aura:id="cancelAgreementNotifySigner" />
                                    <span class="slds-checkbox--faux"></span>
                                    <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_Notify_Signer_Label }</span>
                                </div>
                            </div>
                        </div>
                        <div class="slds-modal__footer">
                            <button onclick="{!c.cancelAgreement}" class="slds-button slds-button--neutral slds-button--brand slds-float--left">{! $Label.echosign_dev1.OK_Button_Label }</button>
                            <button onclick="{!c.toggleCancelAgreementDialog}" class="slds-button slds-button--neutral slds-button--brand slds-float--right">{! $Label.echosign_dev1.Cancel_Button_Label }</button>
                        </div>
                    </div>
                </div>
                <div class="slds-modal-backdrop slds-modal-backdrop--open"></div>
            </div> 
            <div id="deleteAgreementDialog" class="slds-hide">
                <div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open esign-modal-small">
                    <div class="slds-modal__container">
                        <div class="slds-modal__header">
                            <h2 class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_Delete_Agreement_Header }</h2>
                            <button onclick="{! c.toggleDeleteAgreementDialog }" class="slds-button slds-modal__close">
                                <echosign_dev1:svgIcon class="slds-button__icon slds-button__icon--inverse slds-button__icon--large esign-icon-markup" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                <span class="slds-assistive-text"></span>
                            </button>
                        </div>
                        <div class="slds-modal__content">
                            <div class="slds-form--stacked">
                                <div class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <ui:inputTextArea aura:id="deleteAgreementReason" label="" class="slds-textarea" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Optional_Reason_Placeholder }" rows="5"/>
                                    </div>
                                </div>
                                <div class="slds-form-element">
                                    <ui:inputCheckbox aura:id="deleteAgreementNotifySigner" />
                                    <span class="slds-checkbox--faux"></span>
                                    <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_Notify_Signer_Label }</span>
                                </div>
                            </div>
                        </div>
                        <div class="slds-modal__footer">
                            <button onclick="{!c.deleteAgreement}" class="slds-button slds-button--neutral slds-button--brand slds-float--left">{! $Label.echosign_dev1.OK_Button_Label }</button>
                            <button onclick="{!c.toggleDeleteAgreementDialog}" class="slds-button slds-button--neutral slds-button--brand slds-float--right">{! $Label.echosign_dev1.Cancel_Button_Label }</button>
                        </div>
                    </div>
                </div>
                <div class="slds-modal-backdrop slds-modal-backdrop--open"></div>
            </div>
            <div id="recipientVerificationDialog" class="slds-hide">
                                    <div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open esign-modal-small">
                                        <div class="slds-modal__container">
                                            <div class="slds-modal__header">
                                                <h2 class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_Identity_Verification_Header }</h2>
                                                <button onclick="{! c.closeRecipientVerificationDialog }" class="slds-button slds-modal__close">
                                                    <echosign_dev1:svgIcon class="slds-button__icon slds-button__icon--inverse slds-button__icon--large esign-icon-markup" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                            </div>
                                            <div class="slds-modal__content esign-large-p-bottom">
                                                <div class="slds-form--stacked">
                                                    <div class="slds-form-element">
                                                        <div id="recipientVerificationPanel" aria-expanded="true" class="slds-picklist">
                                                            <button id="recipientVerificationTypeButton" onclick="{!c.toggleRecipientVerificationSelection}" class="esign-menu-dialog slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                                <span class="slds-truncate">{! v.selectedRecipientWrapper.tempSignerVerificationLabel }</span>
                                                                <aura:if isTrue="{! !v.isSent }">
                                                                    <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                                </aura:if>
                                                            </button>
                                                            <div id="recipientVerificationDropdown" class="esign-menu-dialog slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                                <ul class="slds-dropdown__list" role="menu">
                                                                    <aura:if isTrue="{! v.selectedRecipientWrapper.tempSignerVerification != 'Email' }">
                                                                        <li id="menu-0-0" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.onRecipientEmailVerificationSelection}" data-order="{! v.selectedRecipientWrapper.index }" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Email_Label }</a></li>
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Password__c, v.selectedRecipientWrapper.tempSignerVerification != 'Password') }">
                                                                        <li id="menu-1-1" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onRecipientPasswordVerificationSelection}" data-order="{! v.selectedRecipientWrapper.index }" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Password_Label }</a></li>
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! and( v.settingsWrapper.isNaShard, and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Knowledge_Based_Authentication__c, v.selectedRecipientWrapper.tempSignerVerification != 'KBA') ) }">
                                                                        <li id="menu-2-2" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onRecipientKbaVerificationSelection}" data-order="{! v.selectedRecipientWrapper.index }" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_KBA_Label }</a></li>
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Web_Identity__c, v.selectedRecipientWrapper.tempSignerVerification != 'Social') }">
                                                                        <li id="menu-2-2" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onRecipientSocialVerificationSelection}" data-order="{! v.selectedRecipientWrapper.index }" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Social_Label }</a></li>
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! and(v.settingsWrapper.customSettings.echosign_dev1__Enable_Phone_Authentication__c, v.selectedRecipientWrapper.tempSignerVerification != 'Phone') }">
                                                                        <li id="menu-2-2" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onRecipientPhoneVerificationSelection}" data-order="{! v.selectedRecipientWrapper.index }" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Phone_Label }</a></li>
                                                                    </aura:if>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <aura:if isTrue="{! v.selectedRecipientWrapper.tempSignerVerification == 'Password' }">
                                                        <div class="slds-form-element">
                                                            <div class="slds-form-element__control">
                                                                <ui:inputSecret disabled="{! v.isSent }" aura:id="recipientVerificationPasswordInput" change="{!c.setRecipientSignPasswordProcess}" class="slds-input" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Password_Placeholder }" value="{! v.recipientPassword }" />
                                                            </div>
                                                        </div>
                                                        <aura:if isTrue="{! !isSent }">
                                                            <div class="slds-form-element">
                                                                <div class="slds-form-element__control">
                                                                    <ui:inputSecret disabled="{! v.isSent }" aura:id="recipientVerificationPasswordInputConfirm" change="{!c.setRecipientSignPasswordProcess}" class="slds-input" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Confirm_Password_Placeholder }" value="{! v.recipientConfirmPassword }" />
                                                                </div>
                                                            </div>
                                                        </aura:if>
                                                        <aura:if isTrue="{! v.isSignPasswordError }">
                                                            <div id="signPasswordErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--top" role="tooltip">  
                                                                <div class="slds-popover__body">
                                                                    <div>
                                                                        <p>{! $Label.echosign_dev1.Agreement_Confirm_Password_Error }</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </aura:if>
                                                    </aura:if>
                                                    <aura:if isTrue="{! v.selectedRecipientWrapper.tempSignerVerification == 'Phone' }">
                                                        <div class="slds-form-element">
                                                            <div id="recipientVerificationCountry" aria-expanded="true" class="slds-picklist">
                                                                <button id="recipientVerificationCountryButton" onclick="{!c.toggleRecipientVerificationCountry}" class="esign-menu-dialog slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                                    <span class="slds-truncate">{!v.selectedRecipientWrapper.countryCodeLabel}</span>
                                                                    <aura:if isTrue="{! !v.isSent }">
                                                                        <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                                    </aura:if>
                                                                </button>
                                                                <div id="recipientVerificationCountryDropdown" class="esign-menu-dialog slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                                    <ul class="slds-dropdown__list" role="menu">
                                                                        <aura:iteration items="{!v.schemaWrapper.recipientCountryCodes}" var="selectOptionWrapper">
                                                                            <li id="menu-0-0" data-order="{! v.selectedRecipientWrapper.index }" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{! c.onSelectRecipientCountryCode }" data-order="{! selectOptionWrapper.value }" tabindex="-1" class="slds-truncate">{! selectOptionWrapper.label }</a></li>
                                                                        </aura:iteration>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-form-element">
                                                            <input id="recipientVerificationPhone" class="slds-input" type="tel" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Phone_Number_Placeholder }" value="{! v.selectedRecipientWrapper.recipient.echosign_dev1__Phone_Verification_Phone_Number__c }" />
                                                        </div>
                                                    </aura:if>
                                                </div>
                                            </div>
                                            <div class="slds-modal__footer">
                                                <button disabled="{! v.storeRecipientVerificationDisabled }" data-order="{! v.selectedRecipientWrapper.index }" onclick="{!c.storeRecipientVerification}" class="slds-button slds-button--neutral slds-button--brand">{! $Label.echosign_dev1.OK_Button_Label }</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="slds-modal-backdrop slds-modal-backdrop--open"></div>
            </div>          
            <aura:if isTrue="{! v.isShowAddDocumentsDialog }">
                <div id="addDocumentsDialog" class="slds-show">
                    <echosign_dev1:DocumentSelector settingsWrapper="{!v.settingsWrapper}"/>
                </div>
            </aura:if>         
            <aura:if isTrue="{! v.isShowAddTemplatesDialog }">
                <div id="addTemplatesDialog" class="slds-show">
                    <echosign_dev1:FormFieldTemplateSelector />
                </div>
            </aura:if>
            
            <aura:if isTrue="{! v.isLoading }">
                <div class="slds-grid slds-grid--align-center slds-m-vertical--xx-large">
                    <div class="slds-spinner--large slds-m-vertical--xx-large">
                        <img class="slds-m-vertical--xx-large" src="/resource/echosign_dev1__SLDS/SLDS/assets/images/spinners/slds_spinner_brand.gif" alt="" />
                    </div>
                </div>
            </aura:if>
            
            <aura:if isTrue="{! !v.isLoading }">
                <div id="page-header-sticky-div">
                    <div class="slds-page-header">
                        <div class="slds-grid slds-grid--align-left">
                            <div class="slds-col--padded">
                                <div class="slds-media slds-tile">
                                    <div class="slds-media__figure">
                                        <span class="slds-avatar slds-avatar--small">
                                            <img src="/resource/echosign_dev1__EchoSignTabLogo" alt="" />
                                        </span>
                                    </div>
                                    <div class="slds-media__body">
                                        <ul class="tile__detail slds-list--horizontal slds-has-dividers">
                                            <li class="slds-truncate slds-text-body--small slds-list__item">{! $Label.echosign_dev1.Agreement_Editor_Agreement_Header }</li>
                                        </ul>
                                        <p class="tile__title slds-truncate">
                                            {!v.agreementName}
                                            <span class="slds-badge slds-m-left--medium">{!v.agreementStatus}</span>
                                        </p>
                                    </div>
                                    <div class="slds-button-group esign-top-buttons" role="group">
                                        <aura:if isTrue="{! !v.isSent }">
                                            <aura:if isTrue="{! and(v.agreementWrapper.agreement.Id != null, v.settingsWrapper.toolbarSettings.echosign_dev1__Save_Agreement__c ) }">
                                                <button onclick="{!c.saveAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Save_Button_Label }</button>
                                            </aura:if>
                                            <aura:if isTrue="{! and(v.agreementWrapper.agreement.Id == null, v.settingsWrapper.toolbarSettings.echosign_dev1__Save_Agreement__c ) }">
                                                <button onclick="{!c.saveAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Save_Draft_Button_Label }</button>
                                            </aura:if>
                                            <aura:if isTrue="{! and(v.settingsWrapper.toolbarSettings.echosign_dev1__Cancel_Draft__c, v.agreementWrapper.agreement.Id != null) }">
                                                <button onclick="{!c.deleteAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Delete_Draft_Button_Label }</button>
                                            </aura:if>
                                        </aura:if>
                                        <aura:if isTrue="{! v.agreementWrapper.isAuthoringSubmittedStatus }">
                                            <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Update_Status__c }">
                                                <button onclick="{!c.updateAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Update_Button_Label }</button>
                                            </aura:if>
                                            <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__View_Agreement__c }">
                                                <button onclick="{!c.viewAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_View_Button_Label }</button>
                                            </aura:if>
                                            <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Delete_Agreement__c }">
                                                <button id="inAuthoringActionsInput" onclick="{!c.toggleInAuthoringActions}" class="slds-button slds-button--icon-border-filled">
                                                    <echosign_dev1:svgIcon otherClasses="esign-button-group-down-icon" class="slds-button__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                                <div id="inAuthoringActionsDropdown" class="slds-lookup__menu esign-button-group-menu slds-hide" role="listbox">
                                                    <ul class="slds-lookup__list" role="presentation">
                                                        <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Delete_Agreement__c }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.toggleDeleteAgreementDialog}" class="esign-button-group-menu-item" href="#" role="option">{! $Label.echosign_dev1.Agreement_Editor_Delete_Button_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                    </ul>
                                                </div>
                                            </aura:if>
                                        </aura:if>
                                        <aura:if isTrue="{! and(v.agreementWrapper.isInFlightStatus,!v.agreementWrapper.isAuthoringSubmittedStatus) }">
                                            <button onclick="{!c.hostAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Host_Signing_Button_Label }</button>
                                            <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Send_Reminder__c }">
                                                <button onclick="{!c.sendReminder}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Remind_Button_Label }</button>
                                            </aura:if>
                                            <aura:if isTrue="{! or(v.settingsWrapper.toolbarSettings.echosign_dev1__Cancel_Agreement__c, v.settingsWrapper.toolbarSettings.echosign_dev1__Delete_Agreement__c, v.settingsWrapper.toolbarSettings.echosign_dev1__View_Agreement__c, v.settingsWrapper.toolbarSettings.echosign_dev1__Update_Status__c) }">
                                                <button id="inProgressActionsInput" onclick="{!c.toggleInProgressActions}" class="slds-button slds-button--icon-border-filled">
                                                    <echosign_dev1:svgIcon otherClasses="esign-button-group-down-icon" class="slds-button__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                                <div id="inProgressActionsDropdown" class="{! 'slds-lookup__menu slds-hide' + if( or( and( v.isSafari, v.isMacOs ), v.isFirefox), ' esign-button-group-menu-safari', ' esign-button-group-menu' ) }" role="listbox">
                                                    <ul class="slds-lookup__list" role="presentation">
                                                        <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Update_Status__c }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.updateAgreement}" class="esign-button-group-menu-item" href="#" role="option">{! $Label.echosign_dev1.Agreement_Editor_Update_Button_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__View_Agreement__c }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.viewAgreement}" class="esign-button-group-menu-item" href="#" role="option">{! $Label.echosign_dev1.Agreement_Editor_View_Button_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Delete_Agreement__c }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.toggleDeleteAgreementDialog}" class="esign-button-group-menu-item" href="#" role="option">{! $Label.echosign_dev1.Agreement_Editor_Delete_Button_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Cancel_Agreement__c }">
                                                            <li class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.toggleCancelAgreementDialog}" class="esign-button-group-menu-item" href="#" role="option">{! $Label.echosign_dev1.Agreement_Editor_Cancel_Button_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                    </ul>
                                                </div>
                                            </aura:if>
                                        </aura:if>
                                        <aura:if isTrue="{! v.agreementWrapper.isFinalStatus }">
                                        	<aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__View_Agreement__c }">
                                            	<button onclick="{!c.viewAgreement}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_View_Button_Label }</button>
                                           	</aura:if>
                                            <aura:if isTrue="{! v.settingsWrapper.toolbarSettings.echosign_dev1__Delete_Agreement__c }">
                                            	<button onclick="{!c.toggleDeleteAgreementDialog}" class="slds-button slds-button--neutral">{! $Label.echosign_dev1.Agreement_Editor_Delete_Button_Label }</button>
                                           	</aura:if>
                                        </aura:if>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <aura:if isTrue="{! v.errorMessage != null }">
                    <div class="slds-grid slds-m-top--large">
                        <div class="slds-notify slds-notify--alert slds-theme--error slds-theme--inverse-text slds-theme--alert-texture slds-size--1-of-1" role="alert">
                            <span class="slds-assistive-text"></span>
                            <button onclick="{!c.dismissAlert}" class="slds-button slds-button--icon-inverse slds-notify__close">
                                <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" class="slds-button__icon" />
                                <span class="slds-assistive-text"></span>
                            </button>
                            <h2>{! v.errorMessage }</h2>
                        </div>
                    </div>
                </aura:if>
            
                <aura:if isTrue="{! v.agreementWrapper.agreement.echosign_dev1__ErrorMessage__c != null }">
                    <div class="slds-grid slds-m-top--large">
                        <div class="slds-notify slds-notify--alert slds-theme--error slds-theme--inverse-text slds-theme--alert-texture slds-size--1-of-1" role="alert">
                            <span class="slds-assistive-text"></span>
                            <button onclick="{!c.dismissErrorMessage}" class="slds-button slds-button--icon-inverse slds-notify__close">
                                <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" class="slds-button__icon" />
                                <span class="slds-assistive-text"></span>
                            </button>
                            <h2>{! v.agreementWrapper.agreement.echosign_dev1__ErrorMessage__c }</h2>
                        </div>
                    </div>
                </aura:if>
                
                <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                    <div class="slds-col--padded">
                        <div class="slds-form--inline">							
                                    <aura:if isTrue="{! v.isNoRecipientsError }">
                                        <div id="noRecipientsErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--bottom" role="tooltip">  
                                            <div class="slds-popover__body">
                                                <div>
                                                    <p>{! $Label.echosign_dev1.Agreement_Editor_No_Recipient_Error }</p>
                                                </div>
                                            </div>
                                        </div>
                            		</aura:if>
                            <div class="slds-form-element">
                                <div class="slds-text-heading--medium">
                                    {! $Label.echosign_dev1.Agreement_Editor_Recipients_Header }
                                </div>
                            </div>
                            <div class="slds-form-element">
                                <aura:if isTrue="{! or( v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Signing_Order_Field__c, v.settingsWrapper.customSettings.echosign_dev1__Enable_Sender_Signs_Only__c ) }">
                                    <div data-order="signOrderTooltip" onclick="" onmouseover="" onmouseout="" id="signOrder" aria-expanded="true" class="slds-picklist">
                                        <button id="signOrderButton" onclick="{!c.toggleSignOrder}" class="slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                            <span class="slds-truncate">{! v.agreementSignOrderLabel }</span>
                                            <aura:if isTrue="{! and( and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Recipient_Signing_Order_Field__c), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs_Only__c ) }">
                                                <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                            </aura:if>
                                        </button>
                                        <div id="signOrderDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--medium slds-dropdown--menu slds-hide">
                                            <ul class="slds-dropdown__list" role="menu">
                                                <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Signing_Order_Field__c }">
                                                    <aura:if isTrue="{! v.agreementSignOrder != 'Sign in Order' }">
                                                        <li id="menu-0-0" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectSignInOrder}" href="#" tabindex="-1" class="slds-truncate" >{! $Label.echosign_dev1.Agreement_Editor_Sign_In_Order_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! v.agreementSignOrder != 'Sign in Any Order' }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.selectSignInAnyOrder}" href="#" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Sign_In_Any_Order_Label }</a></li>
                                                    </aura:if>
                                               	</aura:if>
                                                <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Sender_Signs_Only__c }">
                                                    <aura:if isTrue="{! v.agreementSignOrder != 'Only I Sign' }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.selectOnlyISign}" href="#" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Only_I_Sign_Order_Label }</a></li>
                                                    </aura:if>
                                                </aura:if>
                                            </ul>
                                        </div>
                                    </div>
                                    <div id="signOrderTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-left slds-hide" role="tooltip">  
                                        <div class="slds-popover__body">
                                            <div>
                                                <p>{! $Label.echosign_dev1.Agreement_Editor_Signature_Flow_Tooltip }</p>
                                            </div>
                                        </div>
                                    </div>
                                </aura:if>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slds-grid slds-grid--align-left slds-m-top--x-small slds-m-left--small slds-m-right--small">
                    <div class="slds-p-bottom--xx-large slds-size--1-of-1">
                    	<aura:if isTrue="{! and( v.agreementSignOrder != 'Only I Sign', or( and(v.agreementSenderSigns, v.agreementWrapper.agreementSenderSigns == 'Sign First'), and(v.agreementSenderSigns, v.agreementSignOrder == 'Sign in Any Order') ) ) }">
                            <ul class="slds-list--vertical slds-has-cards">
                                <li class="slds-list__item slds-page-header slds-m-bottom--x-small">
                                    <div class="slds-form--inline">
                                        <div class="slds-form-element">
                                            <div class="slds-form-element__control">
                                                <div aria-expanded="true" class="slds-picklist">
                                                    <button class="esign-input-readonly esign-picklist-button slds-button slds-button--neutral" aria-haspopup="true">
                                                        <img class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/signer_normal.png" alt="" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="slds-p-left--small slds-form-element__control">
                                                <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                    <div class="slds-form-element">
                                                        <div class="esign-input-readonly slds-grid slds-form-element__control">
                                                            <div class="slds-dropdown-trigger slds-align-middle esign-recipient-type-input">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                <button class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                    <span class="slds-assistive-text"></span>
                                                                </button>
                                                            </div>
                                                            <button onclick="{!c.navToMyself}" class="slds-button esign-recipient-value">{! $Label.echosign_dev1.Agreement_Editor_Myself_Label + ' (' + v.agreementWrapper.contextUserName + ')' }</button>
                                                            <input disabled="disabled" class="slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="">
                                                            </input>                                                            
                                                        </div>
                                                        <div class="slds-pill-container slds-hide"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="slds-form-element__control esign-wide-email">
                                            	<input id="email" class="esign-input-readonly slds-input" type="email" placeholder="" value="{! v.agreementWrapper.contextUserEmail }" readonly="readonly" />
                                        	</div>
                                            <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c,v.agreementSignOrder != 'Sign in Any Order') }">
                                                <div class="slds-form-element__control slds-m-left--xx-large">
                                                    <div id="senderSignsPicklist" aria-expanded="true" class="slds-picklist">
                                                        <button id="senderSignsButton" onclick="{!c.toggleSenderSigns}" class="slds-size--1-of-1 slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                            <span class="slds-truncate">{!v.agreementWrapper.agreementSenderSignsLabel}</span>
                                                            <aura:if isTrue="{! !v.isSent }">
                                                                <echosign_dev1:svgIcon otherClasses="esign-tiny-picklist-icon" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                            </aura:if>
                                                        </button>
                                                        <div id="senderSignsDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                            <ul id="senderSignsDropdownList" class="slds-dropdown__list" role="menu">
                                                                <aura:iteration items="{!v.schemaWrapper.agreementSenderSignsOptions}" var="selectOptionWrapper">
                                                                    <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectSenderSignsOrder}" data-order="{!selectOptionWrapper.value}" tabindex="-1" class="slds-truncate">{!selectOptionWrapper.label}</a></li>
                                                                </aura:iteration>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{! !v.isSent }">
                                                <div class="slds-form-element__control slds-m-left--small">
                                                    <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c }">
                                                        <button onclick="{! c.deleteSenderSigns }" class="slds-button slds-button--icon-bare esign-recipient-delete-button">
                                                            <img class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" />
                                                            <span class="slds-assistive-text"></span>
                                                        </button>
                                                    </aura:if>
                                                    <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c }">
                                                        <img class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility/lock_60.png" alt="" />
                                                    </aura:if>
                                                </div>
                                            </aura:if>
                                        </div>
                                    </div>
                           		</li>
                            </ul>
                        </aura:if>
                        <ul id="sortableRecipients" class="slds-list--vertical slds-has-cards">
                            <aura:iteration items="{! v.recipientWrappers }" var="recipientWrapper">
                                <li id="{! 'recipientRowItem' + recipientWrapper.index }" 
                                    data-order="{! recipientWrapper.index }" 
                                    class="{! 'slds-list__item slds-page-header slds-m-bottom--x-small' + if( recipientWrapper.isHybridMember, ' esign-hybrid-recipient-row', '') + if( recipientWrapper.isHybridLastMember, ' esign-hybrid-recipient-last', '') + if( recipientWrapper.isHybridFirstMember, ' esign-hybrid-recipient-first', '') + if( and(recipientWrapper.isHybridMember, and(!recipientWrapper.isHybridFirstMember, !recipientWrapper.isHybridLastMember)), ' esign-hybrid-recipient-between', '') }">
                                    <div class="slds-form--inline">
                                        <aura:if isTrue="{! and( and(v.agreementSignOrder != 'Sign in Any Order', v.agreementSignOrder != 'Only I Sign'), !v.settingsWrapper.customSettings.echosign_dev1__Disable_Sort_Recipients__c ) }">
                                            <aura:if isTrue="{! !v.isSent }">
                                                <div class="slds-form-element esign-grabber-elem">
                                                    <span class="slds-avatar slds-avatar--x-small slds-p-top--xx-small">
                                                        <img src="/resource/1405887022000/echosign_dev1__GrabberIcon" alt="" />
                                                    </span>
                                                </div>
                                            </aura:if>
                                            <div class="esign-force-left slds-form-element">
                                                <div class="slds-form-element__control slds-size--4-of-12">
                                                    <input id="recipientOrder" onchange="{!c.reorderRecipient}" data-order="{! recipientWrapper.index }" value="{! recipientWrapper.recipient.echosign_dev1__Order_Number__c }" class="slds-input" type="number" placeholder="" />
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! and( v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Approver_Role__c, v.agreementSignOrder != 'Only I Sign' ) }">
                                            <div class="esign-role-section slds-form-element">
                                                <div data-order="{! recipientWrapper.index }" class="slds-form-element__control">
                                                    <div id="recipientRole" data-order="{! recipientWrapper.index }" aria-expanded="true" class="slds-picklist">
                                                        <button id="{! 'recipientRoleButton' + recipientWrapper.index }" data-order="{! recipientWrapper.index }" onclick="{!c.toggleRecipientRole}" class="esign-picklist-label-very-small esign-picklist-button slds-button slds-button--neutral slds-picklist__label esign-picklist-label-small" aria-haspopup="true">
                                                            <aura:if isTrue="{! or( recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Signer', recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == '' ) }">
                                                                <!-- <img id="{! 'recipientRoleSigner' + recipientWrapper.index }" data-order="{! recipientWrapper.index }" class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/signer_normal.png" alt="drag to reorder" /> -->
                                                            	<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-role-type-display-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Signer.svg#AdobeSign_Signer" category="adobe" size="small" name="AdobeSign_Signer" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Approver' }">
                                                                <!-- <img id="{! 'recipientRoleApprover' + recipientWrapper.index }" data-order="{! recipientWrapper.index }" class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_normal.png" alt="drag to reorder" /> -->
                                                            	<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-role-type-display-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Approver.svg#AdobeSign_Approver" category="adobe" size="small" name="AdobeSign_Approver" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Delegate to Signer' }">
                                                                <!-- <img id="{! 'recipientRoleDelegateSigner' + recipientWrapper.index }" data-order="{! recipientWrapper.index }" class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/signer_normal.png" alt="drag to reorder" /> -->
                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-role-type-display-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToSigner.svg#AdobeSign_DelegateToSign" category="adobe" size="small" name="AdobeSign_DelegateToSign" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Delegate to Approver' }">
                                                                <!-- <img id="{! 'recipientRoleDelegateApprover' + recipientWrapper.index }" data-order="{! recipientWrapper.index }" class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_normal.png" alt="drag to reorder" /> -->
                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-role-type-display-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToApprover.svg#AdobeSign_DelegateToApprover" category="adobe" size="small" name="AdobeSign_DelegateToApprover" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! !v.isSent }">
                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                            </aura:if>
                                                        </button>
                                                        <div id="{! 'recipientRoleDropdown' + recipientWrapper.index }" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                            <ul class="slds-dropdown__list" role="menu">
                                                                <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" data-order="{! recipientWrapper.index }">
                                                                    <a id="s01" onclick="{!c.onSelectSignerRole}" data-order="{! recipientWrapper.index }" role="option">
                                                                        <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Signer' || recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == '' }">
                                                                            <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_rollover.png" alt="drag to reorder" data-order="{! recipientWrapper.index }" />
                                                                        	<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-selected-role-signer-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Signer.svg#AdobeSign_Signer" category="adobe" size="small" name="AdobeSign_Signer" />
                                                                        </aura:if>                                                                        
                                                                        <aura:if isTrue="{! and(recipientWrapper.recipient.echosign_dev1__Recipient_Role__c != 'Signer', recipientWrapper.recipient.echosign_dev1__Recipient_Role__c != '') }">
																			<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-unselected-role-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Signer.svg#AdobeSign_Signer" category="adobe" size="small" name="AdobeSign_Signer" />
                                                                        </aura:if>
																		{! $Label.echosign_dev1.Agreement_Editor_Signer_Role_Label }
                                                                    </a>
                                                                </li>
                                                                <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Approver_Role__c }">
                                                                    <li id="menu-1-1" class="slds-dropdown__item" role="menuitem option" data-order="{! recipientWrapper.index }" >
                                                                        <a id="s02" onclick="{!c.onSelectApproverRole}" data-order="{! recipientWrapper.index }" role="option">
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Approver' }">
                                                                                <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_rollover.png" alt="drag to reorder" data-order="{! recipientWrapper.index }" />
																				<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-selected-role-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Approver.svg#AdobeSign_Approver" category="adobe" size="small" name="AdobeSign_Approver" />
                                                                            </aura:if>
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c != 'Approver' }">
                                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-unselected-role-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_Approver.svg#AdobeSign_Approver" category="adobe" size="small" name="AdobeSign_Approver" />
                                                                            </aura:if>
                                                                            {! $Label.echosign_dev1.Agreement_Editor_Approver_Role_Label }
                                                                        </a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Delegate_Signer_Role__c }">
                                                                    <li id="menu-2-2" class="slds-dropdown__item" role="menuitem option" data-order="{! recipientWrapper.index }">
                                                                        <a id="s01" onclick="{!c.onSelectDelegateSignerRole}" data-order="{! recipientWrapper.index }" role="option">
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Delegate to Signer' }">
                                                                                <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_rollover.png" alt="drag to reorder" data-order="{! recipientWrapper.index }" />
                                                                            	<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-selected-role-other-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToSigner.svg#AdobeSign_DelegateToSign" category="adobe" size="small" name="AdobeSign_DelegateToSign" />
                                                                            </aura:if>
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c != 'Delegate to Signer' }">
                                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-unselected-role-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToSigner.svg#AdobeSign_DelegateToSign" category="adobe" size="small" name="AdobeSign_DelegateToSign" />
                                                                            </aura:if>
                                                                            {! $Label.echosign_dev1.Agreement_Editor_Delegate_Signer_Role_Label }
                                                                        </a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Delegate_Approver_Role__c }">
                                                                    <li id="menu-3-3" class="slds-dropdown__item" role="menuitem option" data-order="{! recipientWrapper.index }" >
                                                                        <a id="s02" onclick="{!c.onSelectDelegateApproverRole}" data-order="{! recipientWrapper.index }" role="option">
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c == 'Delegate to Approver' }">
                                                                                <img src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/approver_rollover.png" alt="drag to reorder" data-order="{! recipientWrapper.index }" />
                                                                            	<echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToApprover.svg#AdobeSign_DelegateToApprover" category="adobe" size="small" name="AdobeSign_DelegateToApprover" />
                                                                            </aura:if>
                                                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Role__c != 'Delegate to Approver' }">
                                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="esign-role-unselected-role-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe-sprite/svg/AdobeSign_DelegateToApprover.svg#AdobeSign_DelegateToApprover" category="adobe" size="small" name="AdobeSign_DelegateToApprover" />
                                                                            </aura:if>
                                                                            {! $Label.echosign_dev1.Agreement_Editor_Delegate_Approver_Role_Label }
                                                                        </a>
                                                                    </li>
                                                                </aura:if>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Email' }">
                                            <div class="slds-form-element">
                                                <div class="slds-form-element__control">
                                                    
                                                    <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                        <div class="slds-form-element">
                                                            <div id="{! 'recipientLookupInputPanel' + recipientWrapper.index }" dataOrder="{! recipientWrapper.index }" class="slds-grid slds-form-element__control">
                                                                <div id="recipientTypeInput" onclick="{!c.toggleRecipientType}" data-order="{! recipientWrapper.index }" class="slds-dropdown-trigger slds-align-middle esign-recipient-type-input">
                                                                    
                                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Contact' }">
                                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Lead' }">
                                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'User' }">
                                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                    </aura:if>
                                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Group' }">
                                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#groups" category="standard" size="small" name="groups" />
                                                                    </aura:if>
                                                                    
                                                                    <button id="{! 'recipientTypeButton' + recipientWrapper.index }" dataOrder="{! recipientWrapper.index }" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Recipient__c ) }">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                                        </aura:if>
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                                <aura:if isTrue="{! !recipientWrapper.isRecipientSet }">
                                                                    <input id="recipientInputLookup" class="esign-input-wider slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="" placeholder="{! if( !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Recipient__c, recipientWrapper.searchRecipientWrapper, '' ) }" />
                                                                </aura:if>
                                                                <aura:if isTrue="{! recipientWrapper.isRecipientSet }">
                                                                    <button data-order="{! recipientWrapper.index }" onclick="{!c.navToRecipient}" class="slds-button esign-recipient-value">{! recipientWrapper.name }</button>
                                                                    <input disabled="disabled" class="slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="">
                                                                    </input>
                                                                </aura:if>
                                                                <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Recipient__c) }">
                                                                    <div class="slds-p-right--medium slds-p-top--x-small">
                                                                        <aura:if isTrue="{! !recipientWrapper.isRecipientSet }">
                                                                            <button onclick="{!c.searchRecipient}" data-order="{! recipientWrapper.index }" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                                <span class="slds-assistive-text"></span>
                                                                            </button>
                                                                        </aura:if>
                                                                        <aura:if isTrue="{! and( recipientWrapper.isRecipientSet, v.agreementSignOrder != 'Only I Sign' ) }">
                                                                            <button id="{! recipientWrapper.index }" onclick="{!c.selectUnsetRecipient}" data-order="{! recipientWrapper.index }" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#close" category="utility" size="small" name="close" />
                                                                                <span class="slds-assistive-text"></span>
                                                                            </button>
                                                                        </aura:if>
                                                                    </div>
                                                                </aura:if>
                                                            </div>
                                                            <div class="slds-pill-container slds-hide"></div>
                                                        </div>
                                                        
                                                        <div id="{! 'recipientTypeDropdown' + recipientWrapper.index }" class="slds-lookup__menu esign-menu-align-left slds-hide" role="listbox">
                                                            <ul class="slds-lookup__list" role="presentation">
                                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Contact_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Contact' ) }">
                                                                    <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                        <a id="s01" onclick="{!c.onSelectContactRecipientType}" role="option">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                                            {! $Label.echosign_dev1.Contact_Recipient_Label }</a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Lead_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Lead' ) }">
                                                                    <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                        <a id="s01" onclick="{!c.onSelectLeadRecipientType}" role="option">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                                            {! $Label.echosign_dev1.Lead_Recipient_Label }</a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_User_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'User' ) }">
                                                                    <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                        <a id="s01" onclick="{!c.onSelectUserRecipientType}" role="option">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                            {! $Label.echosign_dev1.User_Recipient_Label }</a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Group_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Group' ) }">
                                                                    <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                        <a id="s01" onclick="{!c.onSelectGroupRecipientType}" role="option">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#groups" category="standard" size="small" name="groups" />
                                                                            {! $Label.echosign_dev1.Group_Recipient_Label }</a>
                                                                    </li>
                                                                </aura:if>
                                                                <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Email_Recipient_Type__c }">
                                                                    <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                        <a id="s01" onclick="{!c.onSelectEmailRecipientType}" role="option">
                                                                            <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#email" category="action" size="small" name="email" />
                                                                            {! $Label.echosign_dev1.Email_Recipient_Label }</a>
                                                                    </li>
                                                                </aura:if>
                                                            </ul>
                                                        </div>
                                                        
                                                        <div id="{! 'recipientSearchResults' + recipientWrapper.index }" class="slds-lookup__menu esign-menu-align-left slds-hide esign-search-rec-panel" role="listbox">
                                                            <ul data-order="{! recipientWrapper.index }" id="recipientSearchResultsList" class="slds-lookup__list" role="presentation">
                                                            	<li class="slds-lookup__item" >
                                                                    <div>
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                        <span class="esign-search-results-label">"{! v.searchTerm }" 
                                                                            {! if( recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Contact',
                                                                            $Label.echosign_dev1.Agreement_Editor_Contacts_Search_Term, 
                                                                            if( recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Lead',
                                                                            $Label.echosign_dev1.Agreement_Editor_Leads_Search_Term, 
                                                                            if( recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'User',
                                                                            $Label.echosign_dev1.Agreement_Editor_Users_Search_Term, 
                                                                            if( recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Group',
                                                                            $Label.echosign_dev1.Agreement_Editor_Groups_Search_Term, '' ) ) ) )
                                                                            }
                                                                        </span>
                                                                    </div>
                                                            	</li>
                                                                <aura:iteration items="{!v.searchItemWrappers}" var="searchItemWrapper">
                                                                    <li class="slds-lookup__item" ><a onclick="{!c.selectRecipientSearchResult}" data-order="{!searchItemWrapper.recordId}" role="option">{!searchItemWrapper.name}</a></li>
                                                                </aura:iteration>
                                                            </ul>
                                                        </div>
                                                        
                                                    </div>
                                                    
                                                </div> 
                                                <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Group' }">
                                                    <div class="slds-form-element__control slds-float--right">
                                                        <aura:if isTrue="{! or( or( v.agreementWrapper.agreement.echosign_dev1__SignatureType__c == 'e-Signature', !recipientWrapper.isRecipientSet), v.isSent ) }">
                                                            <input id="email" class="esign-input-readonly slds-input" type="email" placeholder="" value="{! recipientWrapper.email == null ? $Label.echosign_dev1.Agreement_Editor_Email_Fax_Label : recipientWrapper.email }" readonly="readonly" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( v.agreementWrapper.agreement.echosign_dev1__SignatureType__c == 'Written Signature', recipientWrapper.isRecipientSet, !v.isSent ) }">
                                                            <div id="recipientAddress" aria-expanded="true" class="slds-picklist">
                                                                <button id="recipientAddressButton" onclick="{!c.toggleRecipientAddress}" class="slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                                    <span class="slds-truncate">{! or( recipientWrapper.recipient.echosign_dev1__useEmailAddress__c, !recipientWrapper.isFaxExists ) ? recipientWrapper.email : recipientWrapper.fax }</span>
                                                                    <aura:if isTrue="{! recipientWrapper.isFaxExists }">
                                                                        <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                                    </aura:if>
                                                                </button>
                                                                <aura:if isTrue="{! recipientWrapper.isFaxExists }">
                                                                    <div id="recipientAddressDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                                        <ul class="slds-dropdown__list" role="menu">
                                                                            <li id="menu-0-0" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="0">
                                                                                <a data-order="{! recipientWrapper.index }" onclick="{!c.selectRecipientEmailAddress}" href="#" tabindex="-1" class="slds-truncate" >
                                                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__useEmailAddress__c }">
                                                                                        <echosign_dev1:svgIcon otherClasses="esign-complete-signer-icon" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#check" category="utility" size="small" name="check" />
                                                                                    </aura:if>
                                                                                    <span class="esign-recipient-address-item">{! recipientWrapper.email }</span>
                                                                                </a>
                                                                            </li>
                                                                            <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1">
                                                                                <a data-order="{! recipientWrapper.index }" onclick="{!c.selectRecipientFaxAddress}" href="#" tabindex="-1" class="slds-truncate">
                                                                                    <aura:if isTrue="{! !recipientWrapper.recipient.echosign_dev1__useEmailAddress__c }">
                                                                                        <echosign_dev1:svgIcon otherClasses="esign-complete-signer-icon" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#check" category="utility" size="small" name="check" />
                                                                                    </aura:if>
                                                                                    <span class="esign-recipient-address-item">{! recipientWrapper.fax }</span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </aura:if>
                                                            </div>
                                                        </aura:if>
                                                    </div>
                                                </aura:if>
                                            </div>
                                        </aura:if>
                                        
                                        <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Type__c == 'Email' }">
                                            <div class="slds-form-element esign-recipient-input">
                                                <div id="emailRecipientPanel" class="slds-form-element__control slds-size--1-of-1">
                                                    <div id="recipientTypeInput" onclick="{!c.toggleRecipientType}" data-order="{! recipientWrapper.index }" class="esign-recipient-email-type">
                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#email" category="standard" size="small" name="email" />
                                                        
                                                        <button class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                           	<aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Recipient__c ) }">
                                                                <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                            </aura:if>
                                                            <span class="slds-assistive-text"></span>
                                                        </button>
                                                    </div>
                                                    <ui:inputEmail aura:id="{! 'recipientEmailInput' + recipientWrapper.index }" value="{! recipientWrapper.email }" class="slds-input esign-recipient-email-input" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Email_Address_Placeholder }" />
                                                    <!-- <input id="{! 'recipientEmailInput' + recipientWrapper.index }" class="slds-input esign-recipient-email-input" type="email" placeholder="Enter Email Address" value="{! recipientWrapper.email }" /> -->
                                                </div>
                                                
                                                <div id="{! 'recipientTypeDropdown' + recipientWrapper.index }" class="slds-lookup__menu esign-menu-align-left esign-menu-narrow slds-hide" role="listbox">
                                                    <ul class="slds-lookup__list" role="presentation">
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Contact_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Contact' ) }">
                                                            <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectContactRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contact" category="standard" size="small" name="contact" />
                                                                    {! $Label.echosign_dev1.Contact_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Lead_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Lead' ) }">
                                                            <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectLeadRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#lead" category="standard" size="small" name="lead" />
                                                                    {! $Label.echosign_dev1.Lead_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_User_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'User' ) }">
                                                            <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectUserRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                    {! $Label.echosign_dev1.User_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( !v.settingsWrapper.customSettings.echosign_dev1__Disable_Group_Recipient_Type__c, recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Group' ) }">
                                                            <li data-order="{! recipientWrapper.index }" class="slds-lookup__item">
                                                                <a id="s01" onclick="{!c.onSelectGroupRecipientType}" role="option">
                                                                    <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#groups" category="standard" size="small" name="groups" />
                                                                    {! $Label.echosign_dev1.Group_Recipient_Label }</a>
                                                            </li>
                                                        </aura:if>
                                                    </ul>
                                                </div>
                                                
                                            </div>                                                     
                                            
                                        </aura:if>
                                        
                                        <aura:if isTrue="{! and(v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Security_Options__c, v.agreementSignOrder != 'Only I Sign')  }">
                                            <div class="slds-form-element esign-recipient-security-input">
                                                <div data-order="{! recipientWrapper.index }" onclick="{! c.openRecipientVerificationDialog }" class="slds-form-element__control">
                                                    <img data-order="{! recipientWrapper.index }" class="esign-lds-invert-icon esign-input-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/custom/custom76_120.png" alt="" />
                                                    <input data-order="{! recipientWrapper.index }" readonly="readonly" id="recipientVerification" class="slds-input slds-p-left--xx-large" type="text" placeholder="" 
                                                           value="{! recipientWrapper.recipient.echosign_dev1__Signer_Verification_Method__c == null ? $Label.echosign_dev1.Agreement_Editor_Identity_Email_Label : recipientWrapper.tempSignerVerificationLabel }">
                                                    </input>
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! v.agreementSignOrder != 'Only I Sign' }">  
                                            <div data-order="{! recipientWrapper.index }" onclick="{!c.onOpenRecipientMessage}" class="slds-form-element">     
                                                <button data-order="{! recipientWrapper.index }" class="slds-button slds-button--icon-bare">
                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Message__c == null }">
                                                        <img data-order="{! recipientWrapper.index }" class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/message_normal@2x.png" alt="" />
                                                    </aura:if>
                                                    <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Recipient_Message__c != null }">
                                                        <img data-order="{! recipientWrapper.index }" class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/message_active@2x.png" alt="" />
                                                    </aura:if>
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                            </div>
                                            <!-- <div id="recipientMessageTooltip" class="esign-tooltip slds-popover slds-popover- -tooltip slds-nubbin- -top-right" role="tooltip">  
                                                <div class="slds-popover__body">
                                                    <div>
                                                        <p>{! $Label.echosign_dev1.Recipient_Message_Tooltip }</p>
                                                    </div>
                                                </div>
                                            </div> -->
                                        </aura:if>
                                        <aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Disable_Delete_Recipient__c ) }">   
                                            <div onclick="{!c.deleteRecipient}" data-order="{! recipientWrapper.index }" class="slds-form-element">
                                                <button data-order="{! recipientWrapper.index }" class="slds-button slds-button--icon-bare esign-recipient-delete-button">
                                                    <img data-order="{! recipientWrapper.index }" class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! v.isSent }">
                                            <aura:if isTrue="{! recipientWrapper.recipient.echosign_dev1__Status__c == 'Signed' || recipientWrapper.recipient.echosign_dev1__Status__c == 'Approved' }">
                                                <div class="esign-right-center-icon slds-form-element slds-float--right slds-m-top--x-small">
                                                    <echosign_dev1:svgIcon otherClasses="esign-complete-signer-icon" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#check" category="utility" size="small" name="check" />
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{! and( recipientWrapper.recipient.echosign_dev1__Status__c == 'Waiting for Signature' || recipientWrapper.recipient.echosign_dev1__Status__c == 'Waiting for Approval', recipientWrapper.recipient.echosign_dev1__Recipient_Type__c != 'Group' ) }">
                                                <div class="esign-right-center-icon slds-form-element slds-float--right slds-m-top--x-small">
                                                    <echosign_dev1:svgIcon otherClasses="esign-current-signer-icon" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#forward" category="utility" size="small" name="forward" />
                                                </div>
                                                <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Replace_Signer__c }">        
                                                    <div data-order="{! recipientWrapper.index }" onclick="{! c.toggleReplaceRecipientDialog }" class="esign-right-center-icon slds-form-element slds-float--right slds-m-top--x-small">
                                                        <echosign_dev1:svgIcon dataOrder="{! recipientWrapper.index }" otherClasses="esign-replace-signer-icon" class="slds-icon slds-icon-text-default slds-icon--small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#leave_group" category="action" size="small" name="leave_group" />
                                                    </div>
                                                </aura:if>
                                            </aura:if>
                                        </aura:if>
                                    </div>
                                </li>
                            </aura:iteration>
                        </ul>
                        <aura:if isTrue="{! and( and( v.agreementSignOrder != 'Only I Sign', and(v.agreementSenderSigns, v.agreementWrapper.agreementSenderSigns == 'Sign Last') ), v.agreementSignOrder != 'Sign in Any Order') }">
                            <ul class="slds-list--vertical slds-has-cards">
                                <li class="slds-list__item slds-page-header slds-m-bottom--x-small">
                                    <div class="slds-form--inline">
                                        <div class="slds-form-element">
                                            <div class="slds-form-element__control">
                                                <div aria-expanded="true" class="slds-picklist">
                                                    <button class="esign-input-readonly esign-picklist-button slds-button slds-button--neutral" aria-haspopup="true">
                                                        <img class="esign-role-type-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/adobe/signer_normal.png" alt="drag to reorder" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="slds-p-left--small slds-form-element__control">
                                                <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                    <div class="slds-form-element">
                                                        <div class="esign-input-readonly slds-grid slds-form-element__control">
                                                            <div class="slds-dropdown-trigger slds-align-middle esign-recipient-type-input">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#user" category="standard" size="small" name="user" />
                                                                <button class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                    <span class="slds-assistive-text"></span>
                                                                </button>
                                                            </div>
                                                            <button onclick="{!c.navToMyself}" class="slds-button esign-recipient-value">{! $Label.echosign_dev1.Agreement_Editor_Myself_Label + ' (' + v.agreementWrapper.contextUserName + ')' }</button>
                                                            <input disabled="disabled" class="slds-input--bare" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="">
                                                            </input>                                                            
                                                        </div>
                                                        <div class="slds-pill-container slds-hide"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="slds-form-element__control esign-wide-email">
                                            	<input id="email" class="esign-input-readonly slds-input" type="email" placeholder="" value="{! v.agreementWrapper.contextUserEmail }" readonly="readonly" />
                                        	</div>
                                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c }">
                                                <div class="slds-form-element__control slds-m-left--xx-large">
                                                    <div id="senderSignsPicklist" aria-expanded="true" class="slds-picklist">
                                                        <button id="senderSignsButton" onclick="{!c.toggleSenderSigns}" class="slds-size--1-of-1 slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                            <span class="slds-truncate">{!v.agreementWrapper.agreementSenderSignsLabel}</span>
                                                            <aura:if isTrue="{! !v.isSent }">
                                                                <echosign_dev1:svgIcon otherClasses="esign-tiny-picklist-icon" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                            </aura:if>
                                                        </button>
                                                        <div id="senderSignsDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                            <ul id="senderSignsDropdownList" class="slds-dropdown__list" role="menu">
                                                                <aura:iteration items="{!v.schemaWrapper.agreementSenderSignsOptions}" var="selectOptionWrapper">
                                                                    <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectSenderSignsOrder}" data-order="{!selectOptionWrapper.value}" tabindex="-1" class="slds-truncate">{!selectOptionWrapper.label}</a></li>
                                                                </aura:iteration>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </aura:if>
                                            <aura:if isTrue="{! !v.isSent }">
                                                <div class="slds-form-element__control slds-m-left--small">
                                                    <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c }">
                                                        <button onclick="{! c.deleteSenderSigns }" class="slds-button slds-button--icon-bare esign-recipient-delete-button">
                                                            <img class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" />
                                                            <span class="slds-assistive-text"></span>
                                                        </button>
                                                    </aura:if>
                                                    <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c }">
                                                        <img class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility/lock_60.png" alt="" />
                                                    </aura:if>
                                                </div>
                                            </aura:if>
                                        </div>
                                    </div>
                           		</li>
                            </ul>
                        </aura:if>
                    </div>
                    
                </div>
                
                <div class="slds-grid slds-grid--align-left esign-inverse-m-top">
                    <aura:if isTrue="{! !v.isSent }">
                        <div class="slds-col--padded">
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Add_Recipient__c }">
                                <button onclick="{!c.addRecipient}" class="slds-button">{! $Label.echosign_dev1.Agreement_Editor_Add_Recipient_Label }</button>
                                <aura:if isTrue="{! v.agreementSignOrder != 'Only I Sign' }">
                                    |
                                    <button onclick="{!c.addRecipientMe}" class="slds-button">{! $Label.echosign_dev1.Agreement_Editor_Add_Me_Label }</button>
                                </aura:if>                            </aura:if>
                            <aura:if isTrue="{! and(and(!v.agreementWrapper.isCcSet,!v.settingsWrapper.customSettings.echosign_dev1__Disable_Cc__c),!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Cc__c) }">
                            	<aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Add_Recipient__c }">
                                |
                                </aura:if>
                                <button onclick="{!c.addCc}" class="slds-button">{! $Label.echosign_dev1.Agreement_Editor_Add_Cc_Label }</button>
                            </aura:if>
                        </div>
                    </aura:if>
                    <aura:if isTrue="{! v.agreementSignOrder != 'Only I Sign' }">
                        <div class="slds-col--padded">
                            <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Hosted_Signing_Field__c }">
                                <div data-order="hostedTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-float--right">
                                    <label class="slds-checkbox">
                                        <ui:inputCheckbox disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Hosted_Signing__c) }" value="{! v.agreementHosted }" />
                                        <!-- <input name="checkbox" type="checkbox" id="agreementHosted" checked="{! v.agreementHosted ? true : false }"/> -->
                                        <span class="slds-checkbox--faux"></span>
                                        <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_Host_Signing_Label }</span>
                                    </label>
                                </div>                                
                                <div id="hostedTooltip" class="esign-tooltip esign-tooltip-move-left slds-popover slds-popover--tooltip slds-nubbin--right-bottom slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Hosted_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                            </aura:if>
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Sender_Signs__c }">
                                <div data-order="senderSignsTooltip" onclick="{! c.onSenderSignsClick }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-float--right">
                                    
                                        <label class="slds-checkbox">
                                            <ui:inputCheckbox disabled="{! or( v.isSent, v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sender_Signs__c ) }" value="{! v.agreementSenderSigns }" />
                                            <span class="slds-checkbox--faux"></span>
                                            <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_I_Sign_Label }</span>
                                        </label>
                                </div>                                
                                    <!-- <div id="senderSignsTooltip" class="esign-tooltip esign-tooltip-move-left slds-popover slds-popover- -tooltip slds-nubbin- -right-bottom slds-hide" role="tooltip">  
                                        <div class="slds-popover__body">
                                            <div>
                                                <p>{! $Label.echosign_dev1.Agreement_Editor_Sender_Signs_Tooltip }</p>
                                            </div>
                                        </div>
                                    </div> -->
                            </aura:if>
                        </div>
                    </aura:if>
                </div>
                <aura:if isTrue="{! and(v.agreementWrapper.isCcSet,!v.settingsWrapper.customSettings.echosign_dev1__Disable_Cc__c) }">
                    <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                        <div class="slds-col--padded">
                            <div data-order="ccTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element">
                                <div class="slds-text-heading--medium">{! $Label.echosign_dev1.Agreement_Editor_CC_Header }</div>
                                <div class="slds-form-element__control">
                                    <ui:inputText aura:id="agreementCc" value="{!v.agreementCc}" class="slds-input" placeholder="{! $Label.echosign_dev1.Agreement_Editor_CC_Placeholder }" />
                                </div>
                            </div>
							<div id="ccTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                <div class="slds-popover__body">
                                	<div>
                                		<p>{! $Label.echosign_dev1.Agreement_Editor_Cc_Tooltip }</p>
                                    </div>
                            	</div>
                            </div>
                        </div>
                    </div>
                </aura:if>
                <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Enable_Separate_Signer_Identity_Methods__c, !v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Security_Options__c, v.agreementSignOrder != 'Only I Sign')  }">
                    <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                        <div class="slds-col--padded">
                            <div class="slds-form">
                                <div class="slds-form-element">
                                    <div class="slds-text-heading--medium">
                                        {! $Label.echosign_dev1.Agreement_Editor_Identity_Verification_Header }
                                    </div>
                                </div>
                                <div class="slds-form--inline">
                                    <div class="slds-form-element">
                                        <div>
                                            <span class="slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Identity_All_Recipients_Label }</span>
                                        </div>
                                        <div id="agreementVerificationPanel" aria-expanded="true" class="slds-picklist">
                                            <button id="agreementVerificationInput" onclick="{!c.toggleAgreementVerificationSelection}" class="esign-picklist-label-very-small slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                <span class="esign-picklist-small-value slds-truncate">{! v.agreementWrapper.agreementSignerVerificationMethodLabel }</span>
                                                <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }">
                                                    <echosign_dev1:svgIcon otherClasses="esign-picklist-small-expand" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                </aura:if>
                                            </button>
                                            <div id="agreementVerificationDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                <ul class="slds-dropdown__list" role="menu">
                                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerVerificationMethod != 'Email' }">
                                                        <li id="menu-0-0" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.onAgreementEmailVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Email_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Password__c, v.agreementWrapper.agreementSignerVerificationMethod != 'Password') }">
                                                        <li id="menu-1-1" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementPasswordVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Password_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and( v.settingsWrapper.isNaShard, and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Knowledge_Based_Authentication__c, v.agreementWrapper.agreementSignerVerificationMethod != 'KBA') ) }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementKbaVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_KBA_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Web_Identity__c, v.agreementWrapper.agreementSignerVerificationMethod != 'Social') }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementSocialVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Social_Label }</a></li>
                                                    </aura:if>
                                                </ul>
                                            </div>
                                        </div>
                                    </div> 
                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerVerificationMethod == 'Password' }">
                                        <div class="slds-p-top--medium slds-form-element">
                                            <div class="slds-form-element__control">
                                                <ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Password_Placeholder }" class="slds-input" value="{! v.signPassword }"/>
                                            </div>
                                        </div>
                                        <aura:if isTrue="{! !v.isSent }">
                                            <div class="slds-p-top--medium slds-form-element">
                                                <div class="slds-form-element__control">
                                                    <ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Confirm_Password_Placeholder }" class="slds-input" value="{! v.signPasswordConfirm }"/>
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! v.isSignPasswordError }">
                                            <div id="signPasswordErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--top" role="tooltip">  
                                                <div class="slds-popover__body">
                                                    <div>
                                                        <p>{! $Label.echosign_dev1.Agreement_Confirm_Password_Error }</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </aura:if>
                                    </aura:if>
                                </div>
                            </div>
                        </div>
                    </div>
                </aura:if>
                <aura:if isTrue="{! and(v.settingsWrapper.customSettings.echosign_dev1__Enable_Separate_Signer_Identity_Methods__c, !v.settingsWrapper.customSettings.echosign_dev1__Enable_Recipient_Security_Options__c, v.agreementSignOrder != 'Only I Sign')  }">
                    <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                        <div class="slds-col--padded">
                            <div class="slds-form">
                                <div class="slds-form-element">
                                    <div class="slds-text-heading--medium">
                                        {! $Label.echosign_dev1.Agreement_Editor_Identity_Verification_Header }
                                    </div>
                                </div>
                                <div class="slds-form--inline">
                                    <div class="slds-form-element">
                                        <div>
                                            <span class="slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Identity_Internal_Recipients_Label }</span>
                                        </div>
                                        <div id="agreementInternalVerificationPanel" aria-expanded="true" class="slds-picklist">
                                            <button id="agreementInternalVerificationInput" onclick="{!c.toggleAgreementInternalVerificationSelection}" class="esign-small-picklist-button slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                <span class="esign-picklist-small-value slds-truncate">{! v.agreementWrapper.agreementSignerInternalVerificationMethodLabel }</span>
                                                <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }">
                                                    <echosign_dev1:svgIcon otherClasses="esign-picklist-small-expand" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                </aura:if>
                                            </button>
                                            <div id="agreementInternalVerificationDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                <ul class="slds-dropdown__list" role="menu">
                                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerInternalVerificationMethod != 'Email' }">
                                                        <li id="menu-0-0" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.onAgreementEmailInternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Email_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Password__c, v.agreementWrapper.agreementSignerInternalVerificationMethod != 'Password') }">
                                                        <li id="menu-1-1" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementPasswordInternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Password_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and( v.settingsWrapper.isNaShard, and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Knowledge_Based_Authentication__c, v.agreementWrapper.agreementSignerInternalVerificationMethod != 'KBA') ) }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementKbaInternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_KBA_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Web_Identity__c, v.agreementWrapper.agreementSignerInternalVerificationMethod != 'Social') }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementSocialInternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Social_Label }</a></li>
                                                    </aura:if>
                                                </ul>
                                            </div>
                                        </div>
                                    </div> 
                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerInternalVerificationMethod == 'Password' }">
                                        <div class="slds-m-top--large slds-form-element">
                                            <div class="slds-form-element__control">
                                                <ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Password_Placeholder }" class="slds-input" value="{! v.signPasswordInternal }"/>
                                            </div>
                                        </div>
                                        <aura:if isTrue="{! !v.isSent }">
                                            <div class="slds-m-top--large slds-form-element">
                                                <div class="slds-form-element__control">
                                                	<ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Confirm_Password_Placeholder }" class="slds-input" value="{! v.signPasswordInternalConfirm }"/>
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! v.isSignInternalPasswordError }">
                                            <div id="signPasswordErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--top" role="tooltip">  
                                                <div class="slds-popover__body">
                                                    <div>
                                                        <p>{! $Label.echosign_dev1.Agreement_Confirm_Password_Error }</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </aura:if>
                                    </aura:if>
                                    <div class="slds-form-element">
                                        <div>
                                            <span class="slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Identity_External_Recipients_Label }</span>
                                        </div>
                                        <div id="agreementExternalVerificationPanel" aria-expanded="true" class="slds-picklist">
                                            <button id="agreementExternalVerificationInput" onclick="{!c.toggleAgreementExternalVerificationSelection}" class="esign-small-picklist-button slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                                <span class="esign-picklist-small-value slds-truncate">{! v.agreementWrapper.agreementSignerExternalVerificationMethodLabel }</span>
                                                <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }">
                                                    <echosign_dev1:svgIcon otherClasses="esign-picklist-small-expand" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                                </aura:if>
                                            </button>
                                            <div id="agreementExternalVerificationDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                                <ul class="slds-dropdown__list" role="menu">
                                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerExternalVerificationMethod != 'Email' }">
                                                        <li id="menu-0-0" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.onAgreementEmailExternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Email_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Password__c, v.agreementWrapper.agreementSignerExternalVerificationMethod != 'Password') }">
                                                        <li id="menu-1-1" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementPasswordExternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Password_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and( v.settingsWrapper.isNaShard, and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Knowledge_Based_Authentication__c, v.agreementWrapper.agreementSignerExternalVerificationMethod != 'KBA') ) }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementKbaExternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_KBA_Label }</a></li>
                                                    </aura:if>
                                                    <aura:if isTrue="{! and(!v.settingsWrapper.customSettings.echosign_dev1__Disable_Web_Identity__c, v.agreementWrapper.agreementSignerExternalVerificationMethod != 'Social') }">
                                                        <li id="menu-2-2" href="#" class="slds-dropdown__item" role="menuitem option" tabindex="-1"><a onclick="{!c.onAgreementSocialExternalVerificationSelection}" tabindex="-1" class="slds-truncate">{! $Label.echosign_dev1.Agreement_Editor_Identity_Social_Label }</a></li>
                                                    </aura:if>
                                                </ul>
                                            </div>
                                        </div>
                                    </div> 
                                    <aura:if isTrue="{! v.agreementWrapper.agreementSignerExternalVerificationMethod == 'Password' }">
                                        <div class="slds-m-top--large slds-form-element">
                                            <div class="slds-form-element__control">
                                                <ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Enter_Password_Placeholder }" class="slds-input" value="{! v.signPasswordExternal }"/>
                                            </div>
                                        </div>
                                        <aura:if isTrue="{! !v.isSent }">
                                            <div class="slds-m-top--large slds-form-element">
                                                <div class="slds-form-element__control">
                                                	<ui:inputSecret disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Security_Options__c) }" change="{!c.setAgreementSignPassword}" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Confirm_Password_Placeholder }" class="slds-input" value="{! v.signPasswordExternalConfirm }"/>
                                                </div>
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! v.isSignExternalPasswordError }">
                                            <div id="signPasswordErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--top" role="tooltip">  
                                                <div class="slds-popover__body">
                                                    <div>
                                                        <p>{! $Label.echosign_dev1.Agreement_Confirm_Password_Error }</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </aura:if>
                                    </aura:if>
                                </div>
                            </div>
                        </div>
                    </div>
                </aura:if>                
                <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                    <div class="slds-col--padded">
                        <div class="slds-grid slds-grid--align-left">
                            <div class="slds-col--padded">
                                <div class="slds-text-heading--medium">
                                    {! $Label.echosign_dev1.Agreement_Editor_Details_Header }
                                </div>
                                <div id="agreementNamePanel" data-order="nameTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--x-small">
                                    <div class="slds-form-element__control">
                                        <ui:inputText aura:id="agreementName" class="slds-input" value="{!v.agreementName}" required="true" placeholder="{! $Label.echosign_dev1.Agreement_Editor_Agreement_Name_Placeholder }"/>
                                    </div>
                                </div>
                                <div id="nameTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Name_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                                <div data-order="messageTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--x-small">
                                    <div class="slds-form-element__control">
                                        <ui:inputTextArea aura:id="agreementMessage" value="{!v.agreementMessage}" class="slds-textarea" placeholder="{! if( !v.isSent, $Label.echosign_dev1.Agreement_Editor_Message_Placeholder, '' ) }"/>
                                    </div>
                                </div>
                                <div id="messageTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Message_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="{! if(v.isIe11,'','slds-form--inline') }">
                                    <div class="esign-top-object-lookup-section slds-form-element slds-m-top--x-small">
                                        <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Account_Lookup__c }">
                                            <div class="slds-p-top--small slds-size--1-of-3 slds-form-element__control">
                                                <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                    <div class="esign-object-lookup-section slds-form-element">
                                                        <div id="accountLookupPanel" class="slds-grid slds-form-element__control esign-lookup-form-control">
                                                            <div class="slds-dropdown-trigger slds-align-middle">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#account" category="standard" size="small" name="account" />
                                                            </div>
                                                            <aura:if isTrue="{! !v.agreementWrapper.isAccountSet }">
                                                                <input id="accountInputLookup" class="{! if( v.isIe11, 'slds-p-bottom--small ', '' ) + 'esign-lookup-button-panel slds-input--bare' }" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="" placeholder="{! if( and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Account__c), $Label.echosign_dev1.Agreement_Editor_Search_Account_Placeholder, '' ) }" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! v.agreementWrapper.isAccountSet }">
                                                                <button onclick="{!c.navToAccount}" class="slds-button esign-recipient-value esign-lookup-value"><p class="slds-truncate">{! v.agreementWrapper.accountName }</p></button>
                                                            </aura:if>
                                                            <aura:if isTrue="{! and( and( !v.agreementWrapper.isAccountSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Account__c) }">
                                                            	<div class="esign-padding-top-custom-lookups">
                                                                    <button onclick="{!c.searchAccount}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                            </aura:if>
                                                           	<aura:if isTrue="{! and( and( v.agreementWrapper.isAccountSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Account__c) }">
                                                           		<div class="esign-margin-left-custom-lookups esign-padding-top-custom-lookups">
                                                                	<button onclick="{!c.selectUnsetAccount}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#close" category="utility" size="small" name="close" />
                                                                        <span class="slds-assistive-text"></span>
                                                                	</button>
                                                                </div>
                                                            </aura:if>
                                                        </div>
                                                        <div class="slds-pill-container slds-hide"></div>
                                                    </div>
                                                    <div id="accountSearchResults" class="slds-lookup__menu esign-menu-align-left slds-hide esign-search-panel" role="listbox">
                                                        <ul id="accountSearchResultsList" class="slds-lookup__list" role="presentation">
                                                             <li class="slds-lookup__item" >
                                                                <div>
                                                                    <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                	<span class="esign-search-results-label">"{! v.searchTerm }" {! $Label.echosign_dev1.Agreement_Editor_Accounts_Search_Term }</span>
                                                                </div>
                                                            </li>
                                                            <aura:iteration items="{!v.searchItemWrappers}" var="searchItemWrapper">
                                                                <li class="slds-lookup__item" ><a onclick="{!c.selectAccountSearchResult}" data-order="{!searchItemWrapper.recordId}" role="option">{!searchItemWrapper.name}</a></li>
                                                            </aura:iteration>
                                                        </ul>
                                                    </div>
                                                </div>                                       
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Opportunity_Lookup__c }">
                                            <div class="slds-p-top--small slds-size--1-of-3 slds-form-element__control">
                                                <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                    <div class="esign-object-lookup-section slds-form-element">
                                                        <div id="oppLookupPanel" class="slds-grid slds-form-element__control esign-lookup-form-control">
                                                            <div class="slds-dropdown-trigger slds-align-middle">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#opportunity" category="standard" size="small" name="opportunity" />
                                                            </div>
                                                            <aura:if isTrue="{! !v.agreementWrapper.isOppSet }">
                                                                <input id="oppInputLookup" class="{! if( v.isIe11, 'slds-p-bottom--small ', '' ) + 'esign-opp-lookup-button-panel slds-input--bare' }" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="" placeholder="{! if( and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Opportunity__c), $Label.echosign_dev1.Agreement_Editor_Search_Opportunity_Placeholder, '' ) }" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! v.agreementWrapper.isOppSet }">
                                                                <button onclick="{!c.navToOpp}" class="slds-button esign-recipient-value esign-lookup-value"><p class="slds-truncate">{! v.agreementWrapper.oppName }</p></button>
                                                            </aura:if>
                                                            <aura:if isTrue="{! and( and( !v.agreementWrapper.isOppSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Opportunity__c) }">
                                                            	<div class="esign-padding-top-custom-lookups">
                                                                	<button onclick="{!c.searchOpp}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                            </aura:if>
                                                       		<aura:if isTrue="{! and( and( v.agreementWrapper.isOppSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Opportunity__c) }">
                                                            	<div class="esign-margin-left-custom-lookups esign-padding-top-custom-lookups">
                                                                    <button onclick="{!c.selectUnsetOpp}" class="esign-margin-left-custom-lookups slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#close" category="utility" size="small" name="close" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                        	</aura:if>
                                                        </div>
                                                        <div class="slds-pill-container slds-hide"></div>
                                                    </div>
                                                    <div id="opportunitySearchResults" class="slds-lookup__menu esign-menu-align-left slds-hide esign-search-panel" role="listbox">
                                                        <ul id="oppSearchResultsList" class="slds-lookup__list" role="presentation">
                                                        	<li class="slds-lookup__item" >
                                                                <div>
                                                                    <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                	<span class="esign-search-results-label">"{! v.searchTerm }" {! $Label.echosign_dev1.Agreement_Editor_Opps_Search_Term }</span>
                                                                </div>
                                                            </li>
                                                            <aura:iteration items="{!v.searchItemWrappers}" var="searchItemWrapper">
                                                                <li class="slds-lookup__item" ><a onclick="{!c.selectOppSearchResult}" data-order="{!searchItemWrapper.recordId}" role="option">{!searchItemWrapper.name}</a></li>
                                                            </aura:iteration>
                                                        </ul>
                                                    </div>
                                                </div>                                       
                                            </div>
                                        </aura:if>
                                        <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Contract_Lookup__c }">
                                            <div class="slds-p-top--small slds-size--1-of-3 slds-form-element__control">
                                                <div class="slds-lookup" data-select="multi" data-scope="multi" data-typeahead="false">
                                                    <div class="esign-object-lookup-section slds-form-element esign-last-form-element">
                                                        <div id="contractLookupPanel" class="slds-grid slds-form-element__control esign-lookup-form-control">
                                                            <div class="slds-dropdown-trigger slds-align-middle">
                                                                <echosign_dev1:svgIcon class="slds-icon slds-icon-standard-user slds-icon--small slds-shrink-none" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/standard-sprite/svg/symbols.svg#contract" category="standard" size="small" name="contract" />
                                                            </div>
                                                            <aura:if isTrue="{! !v.agreementWrapper.isContractSet }">
                                                                <input id="contractInputLookup" class="{! if( v.isIe11, 'slds-p-bottom--small ', '' ) + 'esign-lookup-button-panel slds-input--bare' }" type="text" aria-autocomplete="list" role="combobox" aria-expanded="true" aria-activedescendant="" placeholder="{! if( and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Contract__c), $Label.echosign_dev1.Agreement_Editor_Search_Contract_Placeholder, '' ) }" />
                                                            </aura:if>
                                                            <aura:if isTrue="{! v.agreementWrapper.isContractSet }">
                                                                <button onclick="{!c.navToContract}" class="slds-button esign-recipient-value esign-lookup-value"><p class="slds-truncate">{! v.agreementWrapper.contractName }</p></button>
                                                            </aura:if>
                                                            <aura:if isTrue="{! and( and( !v.agreementWrapper.isContractSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Contract__c) }">
                                                              	<div class="esign-padding-top-custom-lookups">  	
                                                                    <button onclick="{!c.searchContract}" class="esign-margin-left-custom-lookups slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                            </aura:if>
                                                            <aura:if isTrue="{! and( and( v.agreementWrapper.isContractSet, !v.isSent ), !v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Contract__c) }">
                                                            	<div class="esign-margin-left-custom-lookups esign-padding-top-custom-lookups">
                                                                	<button onclick="{!c.selectUnsetContract}" class="slds-button slds-button--icon-bare slds-button-space-left slds-shrink-none">
                                                                        <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="esign-margin-left-custom-lookups slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#close" category="utility" size="small" name="close" />
                                                                        <span class="slds-assistive-text"></span>
                                                                    </button>
                                                                </div>
                                                        	</aura:if>
                                                        </div>
                                                        <div class="slds-pill-container slds-hide"></div>
                                                    </div>
                                                    <div id="contractSearchResults" class="slds-lookup__menu esign-menu-align-left slds-hide esign-search-panel" role="listbox">
                                                        <ul id="contractSearchResultsList" class="slds-lookup__list" role="presentation">
                                                        	<li class="slds-lookup__item" >
                                                                <div>
                                                                    <echosign_dev1:svgIcon otherClasses="esign-small-icon" class="slds-button__icon esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search" category="utility" size="small" name="search" />
                                                                	<span class="esign-search-results-label">"{! v.searchTerm }" {! $Label.echosign_dev1.Agreement_Editor_Contracts_Search_Term }</span>
                                                                </div>
                                                            </li>
                                                            <aura:iteration items="{!v.searchItemWrappers}" var="searchItemWrapper">
                                                                <li class="slds-lookup__item" ><a onclick="{!c.selectContractSearchResult}" data-order="{!searchItemWrapper.recordId}" role="option">{!searchItemWrapper.name}</a></li>
                                                            </aura:iteration>
                                                        </ul>
                                                    </div>
                                                </div>                                       
                                            </div>
                                        </aura:if>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                            <div class="slds-col--padded">
                                <div class="slds-text-heading--medium">
                                    {! $Label.echosign_dev1.Agreement_Editor_Files_Header }
                                </div>
                            </div>
                            <aura:if isTrue="{! v.isNoDocumentsError }">
                                <div id="noDocumentsErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--bottom" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_No_File_Error }</p>
                                        </div>
                                    </div>
                                </div>
                            </aura:if>
                            <aura:if isTrue="{! !v.isSent }">
                                <div class="slds-col--padded">
                                    <button onclick="{! c.toggleAddDocumentsDialog }" class="slds-button slds-float--right">{! $Label.echosign_dev1.Agreement_Editor_Add_Files_Label }</button>
                                </div>
                            </aura:if>
                        </div>
                        <div class="slds-m-left--xxx-small">
                            
                            <div class="{! 'slds-grid slds-grid--align-left slds-m-top--x-small slds-box' + if( v.isNoDocumentsError, ' esign-error-panel', '' ) }">
                                <div class="slds-p-bottom--xx-large slds-size--1-of-1">
                                    <aura:if isTrue="{! v.attachmentWrappers.length == 0 }">
                                        <div class="{! 'slds-text-heading--small esign-center-label' + if( v.isNoDocumentsError, ' esign-error-message', '' ) }">
                                            {! $Label.echosign_dev1.Agreement_Editor_No_Files_Label }
                                        </div>
                                    </aura:if>
                                    <ul id="sortableDocuments" class="slds-list--vertical slds-has-cards">
                                        <aura:iteration items="{!v.attachmentWrappers}" var="attachmentWrapper">
                                            <li id="{! 'documentRowItem' + attachmentWrapper.index }" data-order="{! attachmentWrapper.index }" class="esign-document-row slds-list__item ui-state-default">
                                                <div class="slds-media slds-tile">
                                                    <aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Disable_Sort_Attachments__c ) }">
                                                        <span class="slds-avatar slds-avatar--x-small slds-p-top--xx-small">
                                                            <img src="/resource/1405887022000/echosign_dev1__GrabberIcon" alt="" />
                                                        </span>
                                                    </aura:if>
                                                    <div class="slds-media__figure">
                                                        <echosign_dev1:svgIcon svgPath="{!'/resource/echosign_dev1__SLDS/SLDS/assets/icons/doctype-sprite/svg/symbols.svg#' + attachmentWrapper.docType}" category="standard" size="small" name="{!attachmentWrapper.docType}" />
                                                    </div>
                                                    <div id="viewDocumentPanel" class="slds-media__body slds-m-left--small slds-p-top--xx-small">
                                                        <aura:if isTrue="{! and( and( attachmentWrapper.uploadedContent == null, and(attachmentWrapper.libraryId == null, attachmentWrapper.libraryRecordId == null ) ), !v.settingsWrapper.customSettings.echosign_dev1__Disable_View_Agreement_Attachments__c ) }">
                                                            <a data-order="{! attachmentWrapper.index }" onclick="{!c.viewDocument}">{!attachmentWrapper.title}</a>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and( attachmentWrapper.uploadedContent != null, !v.settingsWrapper.customSettings.echosign_dev1__Disable_View_Agreement_Attachments__c ) }">
                                                            <a data-order="{! attachmentWrapper.index }" onclick="{!c.viewUploadedDocument}">{!attachmentWrapper.title}</a>
                                                        </aura:if>
                                                        <aura:if isTrue="{! or( or(attachmentWrapper.libraryId != null, attachmentWrapper.libraryRecordId != null), v.settingsWrapper.customSettings.echosign_dev1__Disable_View_Agreement_Attachments__c ) }">
                                                            {!attachmentWrapper.title}
                                                        </aura:if>
                                                    </div>
                                                    <div>
                                                        <label class="slds-form-element__label">{!attachmentWrapper.fileRepositoryLabel}</label>
                                                    </div>
                                                    <aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Disable_Delete_Agreement_Attachments__c ) }">
                                                        <div id="{!attachmentWrapper.index}" onclick="{!c.deleteDocument}" class="slds-m-right--small">
                                                            <button class="slds-button slds-button--icon-bare">
                                                                <img data-order="{! attachmentWrapper.index }" class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" />
                                                                <span class="slds-assistive-text"></span>
                                                            </button>
                                                        </div>
                                                    </aura:if>
                                                </div>
                                            </li>
                                        </aura:iteration>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Layers_Section__c }">
                            <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                                <div class="slds-col--padded">
                                    <div class="slds-text-heading--medium">
                                        {! $Label.echosign_dev1.Agreement_Editor_Form_Header }
                                    </div>
                                </div>
                                <aura:if isTrue="{! and( !v.isSent, !v.settingsWrapper.customSettings.echosign_dev1__Disable_Layer_Attachments__c ) }">
                                    <div class="slds-col--padded">
                                        <button onclick="{! c.toggleAddTemplatesDialog }" class="slds-button slds-float--right">{! $Label.echosign_dev1.Agreement_Editor_Add_Templates_Label }</button>
                                    </div>
                                </aura:if>
                            </div>
                            <div class="slds-m-left--xxx-small">
                                <div class="slds-grid slds-grid--align-left slds-m-top--x-small slds-box">
                                    <div class="slds-p-bottom--xx-large slds-size--1-of-1">
                                        <aura:if isTrue="{! v.agreementWrapper.templateWrappers.length == 0 }">
                                            <div class="slds-text-heading--small esign-center-label">
                                                {! $Label.echosign_dev1.Agreement_Editor_No_Templates_Label }
                                            </div>
                                        </aura:if>
                                        <ul id="sortableDocuments" class="slds-list--vertical slds-has-cards">
                                            <aura:iteration items="{!v.agreementWrapper.templateWrappers}" var="templateWrapper">
                                                <li id="{! 'templateRowItem' + templateWrapper.index }" data-order="{! templateWrapper.index }" class="esign-document-row slds-list__item ui-state-default">
                                                    <div class="slds-media slds-tile">
                                                        <div class="slds-p-left--small slds-media__figure">
                                                            <echosign_dev1:svgIcon svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/doctype-sprite/svg/symbols.svg#overlay" category="standard" size="small" name="overlay" />
                                                        </div>
                                                        <div class="slds-media__body slds-m-left--small slds-p-top--xx-small">
                                                            {!templateWrapper.title}
                                                        </div>
                                                        <div id="{!templateWrapper.index}" onclick="{!c.deleteTemplate}" class="slds-m-right--small">
                                                        	<button class="slds-button slds-button--icon-bare">
                                                            	<img data-order="{! templateWrapper.index }" class="esign-invert-icon" src="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action/close_60.png" alt="" />
                                                                <span class="slds-assistive-text">{! $Label.echosign_dev1.Agreement_Editor_Delete_Template_Label }</span>
                                                        	</button>
                                                    	</div>
                                                    </div>
                                                </li>
                                            </aura:iteration>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </aura:if>
                    </div>
                    <div class="slds-container--right slds-container--small slds-size--4-of-12">
                        <div class="slds-text-heading--medium">
                            {! $Label.echosign_dev1.Agreement_Editor_Options_Header }
                        </div>
                        
                        <div class="slds-page-header slds-box slds-m-top--x-small slds-m-right--small">
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_View_Password__c }">
                                <div data-order="viewPasswordTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element">
                                    <label class="slds-checkbox">
                                        <ui:inputCheckbox change="{!c.setAgreementViewPasswordToggleEnable}" disabled="{! v.isSent }" value="{! v.agreementViewPassword }"/>
                                        <span class="slds-checkbox--faux"></span>
                                        <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_View_Password_Label }</span>
                                    </label>
                                </div>
                                <div id="viewPasswordTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-left slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_View_Password_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                                <aura:if isTrue="{! v.agreementViewPassword }">
                                    <div class="slds-m-top--small">
                                        <span>{! $Label.echosign_dev1.Agreement_Editor_Password_Length_Error }</span>
                                    </div>
                                    <div class="slds-form-element slds-m-top--small">
                                        <div class="slds-form-element__control">
                                            <ui:inputSecret disabled="{! v.isSent }" change="{!c.setAgreementViewPassword}" placeholder="{! if(v.isSent, '', $Label.echosign_dev1.Agreement_Editor_Enter_Password_Placeholder) }" class="slds-input" value="{! v.viewPassword }"/>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-m-top--small">
                                        <div class="slds-form-element__control">
                                            <ui:inputSecret disabled="{! v.isSent }" change="{!c.setAgreementViewPassword}" placeholder="{! if(v.isSent, '', $Label.echosign_dev1.Agreement_Editor_Confirm_Password_Placeholder) }" class="slds-input" value="{! v.viewPasswordConfirm }"/>
                                        </div>
                                    </div>
                                </aura:if>
                                <aura:if isTrue="{! v.isViewPasswordError }">
                                    <div id="viewPasswordErrorPanel" class="esign-field-error slds-popover slds-popover--tooltip slds-nubbin--top" role="tooltip">  
                                        <div class="slds-popover__body">
                                            <div>
                                                <p>{! v.viewPasswordError }</p>
                                            </div>
                                        </div>
                                    </div>
                                </aura:if>
                            </aura:if>
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Expiration__c }">
                                <div data-order="deadlineTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" >
                                <div id="deadlineDateButton" class="slds-form-element slds-m-top--large">
                                    <label class="slds-form-element__label" for="date">{! $Label.echosign_dev1.Agreement_Editor_Completion_Deadline_Header }</label>
                                    <div class="slds-form-element__control">
                                        <div onclick="{!c.toggleDeadline}" class="slds-picklist__label esign-picklist-label-custom slds-input-has-icon slds-input-has-icon--right">
                                            <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sign_Expiration__c) }">
                                                <echosign_dev1:svgIcon class="slds-input__icon slds-icon-text-default" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#event" category="utility" size="small" name="event" />
                                            </aura:if>
                                            <ui:inputText change="{!c.editAgreementDeadline}" aura:id="agreementExpireDateInput" value="{! v.agreementWrapper.signingDeadlineFormatted }" class="esign--size--2-of-1 slds-input" placeholder="" />
                                            <!-- <input id="agreementExpireDateInput" value="{! v.agreementWrapper.signingDeadlineFormatted }" class="esign- -size- -2-of-1 slds-input" type="text" placeholder="" label="Date Picker Label" readonly="false"/> -->
                                        </div>
                                    </div>
                                </div>
                                <div id="deadlineDate" class="esign-date-picker-right slds-dropdown slds-dropdown--center slds-datepicker slds-hide slds-m-left--xx-large" aria-hidden="false" data-selection="single">
                                    <div class="slds-datepicker__filter slds-grid">
                                        <div class="slds-datepicker__filter--month slds-grid slds-grid--align-spread slds-size--3-of-4">
                                            <div class="slds-align-middle" role="button" aria-labelledby="bn_prev-label" tabindex="0">
                                                <aura:if isTrue="{! !v.isCurrentMonth }">
                                                    <button onclick="{! c.onSignDeadlinePrevMonth }" class="slds-button slds-button--icon-container">
                                                        <echosign_dev1:svgIcon otherClasses="esign-calendar-icon" class="slds-icon slds-icon--small esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#left" category="utility" size="small" name="left" />
                                                        <span class="slds-assistive-text"></span>
                                                    </button>
                                                </aura:if>
                                            </div>
                                            <div id="month" class="slds-align-middle esign-month-panel" role="heading" aria-live="assertive" aria-atomic="true">{! v.expirePickerSelectedMonth }</div>
                                            <div class="slds-align-middle" role="button" aria-labelledby="bn_next-label" tabindex="0">
                                                <button onclick="{! c.onSignDeadlineNextMonth }" class="slds-button slds-button--icon-container">
                                                    <echosign_dev1:svgIcon otherClasses="esign-calendar-icon" class="slds-icon slds-icon--small esign-invert-full-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#right" category="utility" size="small" name="right" />
                                                    <span class="slds-assistive-text"></span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="slds-picklist datepicker__filter--year slds-shrink-none esign-year-panel">
                                            {! v.expirePickerSelectedYearValue }
                                            <!-- <button id="year" class="slds-button slds-button- -neutral slds-picklist__label" aria-haspopup="true" aria-expanded="false">{! v.expirePickerSelectedYearValue }
                                                <c:svgIcon otherClasses="esign-date-year-select-down" class="slds-icon slds-icon- -small" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                            </button> -->
                                        </div>
                                    </div>
                                    <table class="datepicker__month" role="grid" aria-labelledby="month" tabindex="0">
                                        <thead>
                                            <tr id="weekdays">
                                                <th id="Sunday">
                                                    <abbr title="Sunday">{! $Label.echosign_dev1.Calendar_Day_Sunday }</abbr>
                                                </th>
                                                <th id="Monday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Monday }</abbr>
                                                </th>
                                                <th id="Tuesday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Tuesday }</abbr>
                                                </th>
                                                <th id="Wednesday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Wednesday }</abbr>
                                                </th>
                                                <th id="Thursday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Thursday }</abbr>
                                                </th>
                                                <th id="Friday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Friday }</abbr>
                                                </th>
                                                <th id="Saturday">
                                                    <abbr title="">{! $Label.echosign_dev1.Calendar_Day_Saturday }</abbr>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="expireCalBody">
                                            <aura:iteration items="{!v.calendarWeeks}" var="calendarWeek">
                                                <tr>
                                                    <aura:iteration items="{! calendarWeek.days }" var="day">
                                                        <aura:if isTrue="{! and(day.label != '', day.isAriaDisabled == 'false' ) }">
                                                            <td data-order="{! day.label }" onclick="{! c.selectAgreementDeadline }" class="{! day.classes }" headers="" role="gridcell" aria-selected="{! day.isAriaSelected }" aria-disabled="{! day.isAriaDisabled }">
                                                                <span data-order="{! day.label }" class="slds-day">{! day.label }</span>
                                                            </td>
                                                        </aura:if>
                                                        <aura:if isTrue="{! and(day.label != '', day.isAriaDisabled == 'true' ) }">
                                                            <td data-order="{! day.label }" class="{! day.classes }" headers="" role="gridcell" aria-selected="{! day.isAriaSelected }" aria-disabled="{! day.isAriaDisabled }">
                                                                <span data-order="{! day.label }" class="slds-day">{! day.label }</span>
                                                            </td>
                                                        </aura:if>
                                                        <aura:if isTrue="{! day.label == '' }">
                                                            <td data-order="{! day.label }" class="{! day.classes }" headers="" role="gridcell" aria-selected="{! day.isAriaSelected }" aria-disabled="{! day.isAriaDisabled }">
                                                            </td>
                                                        </aura:if>
                                                    </aura:iteration>
                                                </tr>
                                            </aura:iteration>
                                            
                                        </tbody>
                                    </table>
                                    <span id="bn_prev-label" class="slds-assistive-text"></span>
                                    <span id="bn_next-label" class="slds-assistive-text"></span>
                                </div>
                                </div>
                                <div id="deadlineTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Deadline_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                            </aura:if>
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Sign_Reminder__c }">
                                <div data-order="reminderTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--large">
                                    <label class="slds-form-element__label" for="reminderPicklist">{! $Label.echosign_dev1.Agreement_Editor_Create_Reminders_Label }</label>
                                    <div id="reminderPicklist" aria-expanded="true" class="slds-picklist">
                                        <button id="agreementReminderButton" onclick="{!c.toggleReminder}" class="slds-size--1-of-1 slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                            <span class="slds-truncate">{!v.agreementReminderLabel}</span>
                                            <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Sign_Reminder__c) }">
                                                <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                            </aura:if>
                                        </button>
                                        <div id="reminderDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                            <ul id="reminderDropdownList" class="slds-dropdown__list" role="menu">
                                                <aura:iteration items="{!v.schemaWrapper.agreementReminderOptions}" var="selectOptionWrapper">
                                                    <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectAgreementReminder}" data-order="{!selectOptionWrapper.value}" tabindex="-1" class="slds-truncate">{!selectOptionWrapper.label}</a></li>
                                                </aura:iteration>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div id="reminderTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Reminder_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                            </aura:if>
                            <div data-order="languageTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--large">
                                <label class="slds-form-element__label" for="languagePicklist">{! $Label.echosign_dev1.Agreement_Editor_Recipient_Language_Header }</label>
                                <div id="languagePicklist" aria-expanded="true" class="slds-picklist">
                                    <button id="agreementLanguageButton" onclick="{!c.toggleLanguage}" class="slds-size--1-of-1 slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                        <span class="slds-truncate">{!v.agreementLanguageLabel}</span>
                                        <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Language__c) }">
                                            <echosign_dev1:svgIcon class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                        </aura:if>
                                    </button>
                                    <div id="languageDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                        <ul id="languageDropdownList" class="slds-dropdown__list esign-scrollable-list" role="menu">
                                            <aura:iteration items="{!v.schemaWrapper.agreementLanguageOptions}" var="selectOptionWrapper">
                                                <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectAgreementLanguage}" data-order="{!selectOptionWrapper.value}" tabindex="-1" class="slds-truncate">{!selectOptionWrapper.label}</a></li>
                                            </aura:iteration>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div id="languageTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                            	<div class="slds-popover__body">
                                	<div>
                                    	<p>{! $Label.echosign_dev1.Agreement_Editor_Locale_Tooltip }</p>
                                	</div>
                            	</div>
                            </div>
                            <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Signature_Type__c }">
                                <div class="slds-form-element slds-m-top--large">
                                    <fieldset class="slds-form-element">
                                        <label class="slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Signature_Type_Label }</label>
                                        <div class="slds-form-element__control">
                                            <div class="esign-left-sigtype">
                                                <label class="esign-radio-inline slds-radio" for="esigType">
                                                    <input onclick="{!c.onSelectESignatureType}" type="radio" name="signatureType" id="esigType" />
                                                    <span class="slds-radio--faux"></span>
                                                    <span class="esign-radio-label slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Electronic_Signature_Type_Label }</span>
                                                </label>
                                            </div>
                                            <div>
                                                <label class="esign-radio-align-right esign-radio-inline slds-radio" for="writtenType">
                                                    <input onclick="{!c.onSelectFaxSignatureType}" type="radio" name="signatureType" id="writtenType" />
                                                    <span class="slds-radio--faux"></span>
                                                    <span class="esign-radio-label slds-form-element__label">{! $Label.echosign_dev1.Agreement_Editor_Written_Signature_Type_Label }</span>
                                                </label>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                            </aura:if>
                            <aura:if isTrue="{! v.settingsWrapper.customSettings.echosign_dev1__Enable_Post_Sign_Options__c }">
                                <div data-order="postSignUrlTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--large">
                                    <label class="slds-form-element__label" for="postSignUrlProtocolPicklist">{! $Label.echosign_dev1.Agreement_Editor_Post_Sign_URL_Header }</label>
                                    <div id="postSignUrlProtocolPicklist" aria-expanded="true" class="slds-picklist">
                                        <button id="postSignUrlProtocolButton" onclick="{!c.togglePostSignUrlProtocol}" class="esign-tiny-picklist-button slds-size--1-of-1 slds-button slds-button--neutral slds-picklist__label" aria-haspopup="true">
                                            <span class="slds-truncate">{!v.agreementWrapper.agreementPostSignUrlProtocol}</span>
                                            <aura:if isTrue="{! and(!v.isSent,!v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Post_Sign_Options__c) }">
                                                <echosign_dev1:svgIcon otherClasses="esign-tiny-picklist-icon" class="slds-icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/utility-sprite/svg/symbols.svg#down" category="utility" size="small" name="down" />
                                            </aura:if>
                                        </button>
                                        <ui:inputText aura:id="postSignUrl" value="{! v.agreementWrapper.agreementPostSignUrl }" class="slds-input esign-narrow-right-input" placeholder="" />
                                        <div id="postSignUrlProtocolDropdown" class="slds-dropdown slds-dropdown--left slds-dropdown--small slds-dropdown--menu slds-hide">
                                            <ul id="postSignUrlProtocolDropdownList" class="slds-dropdown__list" role="menu">
                                                <aura:iteration items="{!v.httpProtocolOptions}" var="selectOption">
                                                    <li id="menu-0-0" class="slds-dropdown__item" role="menuitem option" tabindex="0"><a onclick="{!c.selectPostSignUrlProtocol}" data-order="{!selectOption}" tabindex="-1" class="slds-truncate">{!selectOption}</a></li>
                                                </aura:iteration>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div id="postSignUrlTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Post_Sign_Url_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                                <div data-order="postSignDelayTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--large">
                                    <label class="slds-form-element__label" for="postSignDelay">{! $Label.echosign_dev1.Agreement_Editor_Post_Sign_Delay_Header }</label>
                                    <ui:inputNumber aura:id="postSignDelay" value="{!v.agreementWrapper.agreementPostSignDelay}" class="slds-input" placeholder="" />
                                </div>
                                <div id="postSignDelayTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-right slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Post_Sign_Delay_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                            </aura:if>
                        </div>
                    </div>
                </div>
                <aura:if isTrue="{! !v.isSent }">
                    <aura:if isTrue="{! !v.settingsWrapper.customSettings.echosign_dev1__Disable_Preview_Position__c }">
                        <div class="slds-grid slds-grid--align-left slds-m-top--small">
                            <div class="slds-col--padded">
                                <div data-order="authoringTooltip" onclick="{! c.onTooltipOut }" onmouseover="{! c.onTooltipOver }" onmouseout="{! c.onTooltipOut }" class="slds-form-element slds-m-top--x-small">
                                    <label class="slds-checkbox">
                                        <ui:inputCheckbox disabled="{! or(v.isSent,v.settingsWrapper.customSettings.echosign_dev1__Read_Only_Preview_Position__c) }" value="{! v.agreementAuthoring }" />
                                        <span class="slds-checkbox--faux"></span>
                                        <span class="slds-form-element__label slds-m-left--small">{! $Label.echosign_dev1.Agreement_Editor_Authoring_Label }</span>
                                    </label>
                                </div>
                                <div id="authoringTooltip" class="esign-tooltip slds-popover slds-popover--tooltip slds-nubbin--top-left slds-hide" role="tooltip">  
                                    <div class="slds-popover__body">
                                        <div>
                                            <p>{! $Label.echosign_dev1.Agreement_Editor_Authoring_Tooltip }</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </aura:if>
                </aura:if>
                <aura:if isTrue="{! or(!v.isSent,v.agreementWrapper.isAuthoringSubmittedStatus) }">
                    <div class="slds-grid slds-grid--align-left slds-m-top--small">
                        <div class="slds-col--padded">
                            <button onclick="{!c.sendAgreement}" class="slds-button slds-button--brand slds-size--1-of-12">{! v.agreementAuthoring ? $Label.echosign_dev1.Next_Button_Label : $Label.echosign_dev1.Agreement_Editor_Send_Button_Label }</button>
                            <!-- <button onclick="{!c.saveAgreement}" class="slds-button slds-button- -neutral slds-m-left- -small">Save as Draft</button> -->
                        </div>
                    </div>
                </aura:if>
                <aura:if isTrue="{! v.isSent }">
                    <div class="slds-grid slds-grid--align-left slds-m-top--x-large">
                        <aura:if isTrue="{! or( v.agreementWrapper.signedImageUrls.length > 0, v.agreementWrapper.agreement.SignedPDF__c != null ) }">
                            <div class="slds-size--1-of-3 slds-col--padded">
                                <div class="slds-text-heading--medium">
                                    {! $Label.echosign_dev1.Agreement_Editor_Signed_Agreement_Header }
                                </div>
                                <aura:if isTrue="{! v.agreementWrapper.agreement.echosign_dev1__SignedPDF__c != null }">
                                    <div class="slds-m-top--large">
                                   		<div class="slds-media__figure">
                                       		<echosign_dev1:svgIcon svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/doctype-sprite/svg/symbols.svg#pdf" category="standard" size="small" name="pdf" />
                                            <a class="esign-signed-document-link" onclick="{!c.viewSignedDocumentLink}">{! v.agreementWrapper.agreement.Name + ' - ' + if( v.agreementWrapper.isSignedStatus, $Label.echosign_dev1.Agreement_Editor_Signed_File_Extension, $Label.echosign_dev1.Agreement_Editor_Approved_File_Extension) + '.pdf' }</a>
                                        </div>
                                    </div>
                                </aura:if>
                                <aura:if isTrue="{! v.agreementWrapper.signedImageUrls.length > 0 }">
                                    <div class="slds-m-top--large">
                                        <div class="esign-signed-image-panel">
                                            <aura:iteration items="{!v.agreementWrapper.signedImageUrls}" var="signedImageUrl">
                                            	<div><img class="esign-signed-image" src="{! signedImageUrl }" alt="" /></div>
                                            </aura:iteration>
                                        </div>
                                    </div>
                                </aura:if>
                            </div>
                        </aura:if>
                        <div class="slds-col--padded">
                            <div class="slds-text-heading--medium">
                                {! $Label.echosign_dev1.Agreement_Editor_Agreement_Events_Header }
                            </div>
                            <ul class="slds-timeline slds-m-top--large">
                                <aura:iteration items="{!v.agreementWrapper.agreementEventWrappers}" var="agreementEventWrapper">
                                    <li class="slds-timeline__item">
                                        <span class="slds-assistive-text">{! $Label.echosign_dev1.Agreement_Editor_Agreement_Event_Label }</span>
                                        <div class="slds-media slds-media--reverse">
                                            <div class="slds-media__body">
                                                <div class="slds-media slds-media--timeline slds-timeline__media--task">
                                                    <div class="slds-media__figure">
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'CREATED' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#new" category="action" size="small" name="new" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! or( agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'SENT', agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'SENT FOR APPROVAL' ) }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#email" category="action" size="small" name="email" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'SIGNED' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#edit" category="action" size="small" name="edit" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'APPROVED' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#approval" category="action" size="small" name="approval" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'VIEWED' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#preview" category="action" size="small" name="preview" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! or( agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'CANCELLED', agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'DECLINED', agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'EXPIRED' ) }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#close" category="action" size="small" name="close" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'REMINDER' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#announcement" category="action" size="small" name="announcement" />
                                                        </aura:if>
                                                        <aura:if isTrue="{! agreementEventWrapper.agreementEvent.echosign_dev1__Type__c == 'OTHER' }">
                                                            <echosign_dev1:svgIcon otherClasses="esign-event-icon" class="slds-icon slds-icon-standard-task slds-timeline__icon" svgPath="/resource/echosign_dev1__SLDS/SLDS/assets/icons/action-sprite/svg/symbols.svg#more" category="action" size="small" name="more" />
                                                        </aura:if>
                                                    </div>
                                                    <div class="slds-media__body">
                                                        <div class="slds-media slds-tile slds-media--small">
                                                            <div class="slds-media__body">
                                                                <p class="slds-tile__title slds-truncate">{! agreementEventWrapper.agreementEvent.echosign_dev1__Description__c }</p>
                                                                <ul class="slds-tile__detail slds-list--horizontal slds-text-body--small">
                                                                    <li class="slds-list__item slds-m-right--large">
                                                                        <dl class="slds-dl--inline">
                                                                            <dt class="slds-dl--inline__label">{! agreementEventWrapper.eventDateTimeFormatted }</dt>
                                                                        </dl>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </aura:iteration>
                            </ul>
                        </div>
                    </div>
                </aura:if>
                
                <ltng:require scripts="" afterScriptsLoaded="{!c.afterPageLoaded}"/>

            </aura:if>
        </div>
    </div>
</aura:component>