<apex:page docType="html-5.0" controller="dupcheck.dc3ControllerSetup" cache="false" Title="Setup - Duplicate Check for Salesforce" sidebar="false" action="{!janitor}" tabStyle="dc3Setup__tab" readonly="true">
	
	<apex:stylesheet value="{!URLFOR($Resource.dupcheck__dc3Assets,'/dc3/assets/css/bootstrap-namespaced.min.css')}" />
	<apex:stylesheet value="{!URLFOR($Resource.dupcheck__dc3Assets,'/dc3/assets/css/fonts.css')}" />
	
	<apex:stylesheet value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/style/bootstrap-select.css" />
	<apex:stylesheet value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/style/bootstrap-slider.css" />
	<apex:stylesheet value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/style/duplicatecheck.css" /> 
	<apex:stylesheet value="//assets-plautibv.netdna-ssl.com/jqueryui/1.11.1/jquery-ui.css" /> 
	

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/moment/2.15.2/moment.min.js"/>
	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/jquery/1.11.1/jquery.min.js" />
	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/jqueryui/1.11.1/jquery-ui.min.js" />
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/bootstrap/3.2.0/bootstrap.min.js" />

	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/angularjs/1.3.11/angular.min.js" />
	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/angularjs/1.3.11/angular-sanitize.min.js" />
	
	<apex:includeScript value="//assets-plautibv.netdna-ssl.com/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js" />

	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/bootbox.min.js" />
	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/bootstrap-select.js" />
	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/bootstrap-slider.js" />
	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/bootstrap-sortable.js" />

	
	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/duplicatecheck.js" />
	<apex:includeScript value="{!IF(isDev,AssetsUrl,URLFOR($Resource.dupcheck__dupcheckAssets,'/dupcheckAssets'))}/salesforce1/js/duplicatecheck.setup.js" />

	<apex:includeScript value="../../soap/ajax/31.0/connection.js" />
 	
 	

	<div class="bootstrap-sf1" ng-app="setupApp" data-setup-page="{!URLFOR($Page.dc3Setup, null)}" data-current-page="{!$CurrentPage.URL}" data-sf-related-object="{!$RemoteAction.dc3ControllerSetup.getRelatedTypeAhead}" data-object-config-id="{!JSINHTMLENCODE(NULLVALUE(configObject.configId,'empty'))}" data-object-prefix="{!JSINHTMLENCODE(NULLVALUE(configObject.objectPrefix,'empty'))}">
		
		<c:dc3Welcome version="SF1"/>
		<div class="container-fluid">
			<!-- NAV TOP BAR -->
			<div class="row">
				<div class="col-xs-12">
					<div class="pull-right tools ">
						<c:dc3WelcomeLink version="SF1" helpLink="https://support.duplicatecheck.com/article/setup-guide/dc-setup-page?utm_source=dcApp&utm_medium=app&utm_campaign=help_link"/>
					</div>
				</div>
			</div>
			<!-- /NAV TOP BAR -->
			<div class="row"> 
				<div class="col-md-2" ng-controller="objectController" ng-init="endpoint.deleteObject='{!$RemoteAction.dc3ControllerSetup.doDeleteObject}'; endpoint.doAddObject='{!$RemoteAction.dc3ControllerSetup.doAddObject}'">
					<div class="list-group ">
						<div class="list-group-label-bold">Objects</div>
						<apex:repeat value="{!configMap}" var="configItem" rendered="{!NOT(ISNULL(configMap))}">
							<div>
								<a class="list-group-item {!IF(configObject.objectPrefix = configMap[configItem].objectPrefix, 'active','')}" href="#" ng-click="openObject('{!configMap[configItem].objectPrefix}')"> <i class="s1icon {!JSINHTMLENCODE(configMap[configItem].icon)}"></i> <apex:outputText value="{!configMap[configItem].objectLabel}" />
								</a> <a href="#" class="delete s1utility s1utility-close {!IF(configObject.objectPrefix = configMap[configItem].objectPrefix, '','hidden')}" ng-click="deleteConfig('{!configMap[configItem].configId}')" />

							</div>
						</apex:repeat>
						<apex:outputPanel layout="none" rendered="{!objectMeta.size>0}">
							<a class="list-group-item" href="#" data-toggle="modal" data-target="#myModal"><i class="icon icon-green s1utility s1utility-add"></i><strong>Add Object</strong></a>
						</apex:outputPanel>
					</div>
					
					<div class="list-group mg-t-40">
						<div class="list-group-label-bold">General</div>
						<a class="list-group-item" href="#" ng-click="openUrl('{!URLFOR($Page.dc3Settings, null)}')">DC Settings</a>
						<a class="list-group-item" href="#" ng-click="openUrl('{!URLFOR($Page.dc3License, null)}')">License</a>
						<a class="list-group-item" href="#" ng-if="{!license.features.auditLogging}" ng-click="openUrl('{!URLFOR($Page.dc3Audit, null)}')">Audit Logging</a> 
						<a class="list-group-item" href="#" ng-if="{!license.features.frequentWords}" ng-click="openUrl('{!URLFOR($Page.dc3Frequent, null)}')">Frequent Words</a> 
						<a class="list-group-item" href="#" ng-if="{!license.features.advancedDiscard}" ng-click="openUrl('{!URLFOR($Action.dcDiscard__c.List, $ObjectType.dcDiscard__c)}')">Discarded Items</a> 
						<a class="list-group-item" href="#" ng-click="openUrl('{!URLFOR($Page.dc3SetupCheck, null)}')">Setup Check</a> 
						
							
						
						
					</div>
					
					<div class="list-group mg-t-40">
						<div class="list-group-label-bold">License</div> 
						<div class="row mg-t-20">
							<div class="col-xs-12 pd-l-20"><label>Edition</label></div> 
							<div class="col-xs-12 pd-l-20">{!license.information.editionLabel}</div>
						</div>
						<div class="row mg-t-10">
							<div class="col-xs-12 pd-l-20"><label>License End</label></div>
							<div class="col-xs-12 pd-l-20">
								<apex:outputText value="{!licenseEnd}" rendered="{!NOT(ISBLANK(license.information.licenseEnd))}"/>
								<apex:outputText value="Never" rendered="{!ISBLANK(license.information.licenseEnd)}"/>
							</div>
						</div>
						<div class="row mg-t-10">
							<div class="col-xs-12 pd-l-20"><label>License Updated</label></div>
							<div class="col-xs-12 pd-l-20">
								<apex:outputText value="{!licenseRefresh}"/> 
							</div>
						</div>
						<div class="row mg-t-10">
							<div class="col-xs-12 pd-l-20 pd-r-20 text-left"><a href="" class="btn btn-xs btn-default" ng-click="openUrl('{!URLFOR($Page.dc3License, null)}')">View License</a></div>
						</div>
					</div>
					<div class="modal fade add-object" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
										<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
									</button>
									<h4 class="modal-title">Add object</h4>
								</div>
									<div class="modal-body">
										<p>Please select below the object you want to add to your setup.</p>
										<select class="selectpicker add-object col-xs-12" data-live-search="true" ng-model="newObjectPrefix">
											<apex:repeat value="{!objectMeta}" var="meta">
												<option data-icon="s1icon {!JSINHTMLENCODE(meta.Icon)}" value="{!JSINHTMLENCODE(meta.Prefix)}"><apex:outputText value="{!meta.Label}" /></option>
											</apex:repeat>
										</select>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										<button type="button" class="btn btn-primary" ng-click="addObject()">Add</button>
									</div>
							</div>
							<!-- /.modal-content -->
						</div>
						<!-- /.modal-dialog -->
					</div>
					<!-- /.modal -->
				</div>

				<apex:outputPanel layout="none" rendered="{!NOT(ISNULL(configObject))}">
					
					<script type="text/ng-template" id="scenario" data-scenario-list="{!$RemoteAction.dc3ControllerSetup.getScenarioList}">
  						<div class="alert alert-warning" role="alert" ng-if="{!NOT(objectMetaInformation.isSearchable)}">
                            <apex:outputText value="{!objectMetaInformation.Label}"/>&nbsp;needs to have Advanced Matching enabled. Make sure the advanced matching is enabled and the Search Index has been created. Do you reguraly insert or update&nbsp;<apex:outputText value="{!objectMetaInformation.LabelPlural}"/>&nbsp;please install the <a href="https://support.duplicatecheck.com/article/setup-guide/configuring-standard-and-custom-objects#Step4" target="_BLANK">Apex Trigger</a> as well. 
                        </div>
						<div class="row" ng-controller="scenarioController" ng-init="endpoint.addScenario='{!$RemoteAction.dc3ControllerSetup.addScenario}'; endpoint.addScenarioField='{!$RemoteAction.dc3ControllerSetup.addScenarioField}'; endpoint.deleteScenarioField='{!$RemoteAction.dc3ControllerSetup.deleteScenarioField}'; endpoint.updateScenario='{!$RemoteAction.dc3ControllerSetup.updateScenario}';endpoint.deleteScenario='{!$RemoteAction.dc3ControllerSetup.deleteScenario}'; endpoint.updateScenarioField='{!$RemoteAction.dc3ControllerSetup.updateScenarioField}'">
									<div class="col-xs-12">
										<div class="card-list">
											<div class="card-list-heading">
												<table class="table table-hover">
													<thead>
														<tr>
															<th class="col-xs-2">Scenario</th>
															<th class="col-xs-1"></th>
															<th class="col-xs-2">Threshold</th>
															<th class="col-xs-2">Empty Fields</th>
															<th class="col-xs-4">Apply to</th>
															<th class="col-xs-1"></th>
														</tr>
													</thead>
												</table>
											</div>
													<div class="card" ng-repeat="scenario in scenarioList" ng-init="open[scenario.scenarioId] = false; editName[scenario.scenarioId] = (scenario.scenarioId == 'NEW' ? true : false);">
														<div class="card-heading">
															<table class="table table-hover">
																<tbody>
																	<tr>
																		<td class="col-xs-2" ng-click="open[scenario.scenarioId] = (open[scenario.scenarioId] ? false : true)" ng-hide="editName[scenario.scenarioId]">
																			<i class="s1utility s1utility-{{open[scenario.scenarioId] ? 'down' : 'right'}}"></i> 
																			<span ng-bind-html="scenario.scenarioName" ></span>
																		</td>
																		<td class="col-xs-2" ng-show="editName[scenario.scenarioId]">
																			<div class="input-group">
																				<input class="form-control" type="text" ng-model="scenario.scenarioName" ng-enter="saveScenarioName(scenario.scenarioId)"/>
																				<span class="input-group-btn">
																					<button class="btn btn-default" ng-click="saveScenarioName(scenario.scenarioId)">save</button>
																				</div>
																			</div>
																		</td>
																		<td class="col-xs-1 text-right"><a href="#" class="s1utility s1utility-edit" ng-click="editName[scenario.scenarioId] = true;" ng-hide="editName[scenario.scenarioId]"></a></td>
																		<td class="col-xs-2 slider">
																			<div class="col-xs-10" ng-hide="scenario.scenarioId == 'NEW'">
																				<input slider="slider"  type="text" data-slider-min="1" data-slider-max="100" data-slider-step="1" tooltip="hide" value="{{scenario.threshold}}" ng-stop="updateScenario(scenario.scenarioId, 'threshold', scenario.threshold)" ng-model="scenario.threshold"/>
																				
																			</div>
																			<div class="col-xs-2 amount" ng-bind-html="scenario.threshold" ng-hide="scenario.scenarioId == 'NEW'">																	
																			</div> 
																			
																		</td>
																		<td class="col-xs-2">
																			<select class="form-control" ng-hide="scenario.scenarioId == 'NEW'" data-width="100%" ng-model="scenario.scoreMethod" ng-change="updateScenario(scenario.scenarioId, 'scoreMethod', scenario.scoreMethod)">
																				<option value="SEARCH">Disregard</option>
																				<option value="DEDUP50">Score 50%</option>
																				<option value="DEDUP">Score 0%</option>
																			</select>

																		</td>
																		<td class="col-xs-4">
																			<select ng-hide="scenario.scenarioId == 'NEW'" selectpicker="selectpicker" data-width="100%" ng-model="scenario.actionList" multiple="multiple" ng-change="updateAction(scenario.scenarioId)">
																				<option value="INSERT" ng-if="{!license.features.duplicatePrevention}">Insert</option>
																				<option value="UPDATE" ng-if="{!license.features.duplicatePrevention}">Update</option>
																				<option value="SEARCH" >DC Search</option>
																				<option value="CONVERT" ng-if="{!license.features.pageConvert}">DC Convert</option>
																				<option value="CHECK" ng-if="{!license.features.pageCheck}">DC Check</option>
																				<option value="ENTRY" ng-if="{!license.features.pageEntry}">DC Entry</option>
																				<option value="LAYOUT" ng-if="{!license.features.pageLayout}">DC Live</option>
																				<option value="BATCH" ng-if="{!license.features.batchDeduplication}">DC Job</option>
																				<option value="UPLOAD" ng-if="{!license.features.uniqueUpload}">Unique Import</option>
																				<option value="API" ng-if="{!license.features.api}">API</option>
																				<option value="WEB2LEAD" ng-if="{!license.features.web2Lead}">Web2Lead</option>
																				<option value="DIRECT" ng-if="{!license.features.directProcessing}">DC Direct</option>
																				<option value="RVINSERT" ng-if="{!RVInstalled}">RV Insert</option>
																				<option value="RVUPDATE" ng-if="{!RVInstalled}">RV Update</option>
																			</select>

																		</td>

																		<td class="col-xs-1 text-right delete"><a href="#" class="s1utility s1utility-close" ng-click="deleteScenario(scenario.scenarioId)"></a></td>
																	</tr>
																</tbody>
															</table>
														</div>
														<ul class="card-detail" ng-show="open[scenario.scenarioId]">
															<li>
																<table class="table">
																	<thead>
																		<tr>
																			<th class="col-xs-3">Field</th>
																			<th class="col-xs-3">Weighting</th>
																			<th class="">Frequent Words</th>
																			<th class="">Matching Method</th>
                                      										<th class="">Matching Config</th>
																			<th width="20"></th>
																		</tr>
																	</thead>
																	<tbody>
																			<tr ng-repeat="field in scenario.scenarioFields" class="field">
																				<td class="col-xs-3">
																					
																					<select class="form-control" ng-model="field.field" data-live-search="true" data-width="100%" ng-change="updateScenarioField(field.scenarioFieldId, 'field', field.field)" selectpicker-option="fieldList" ng-options="item.value as item.label for item in fieldList | orderBy:item.label">
																			
																					</select>
																				</td>
																				<td class="col-xs-3 slider">
																					<div class="col-xs-10">
																						<input slider="slider" type="text" data-slider-min="1" data-slider-max="100" data-slider-step="1" tooltip="hide" value="{{field.weight}}" ng-model="field.weight" ng-stop="updateScenarioField(field.scenarioFieldId, 'weight', field.weight)"/>
																					</div>
																					<div class="col-xs-2" ng-bind-html="field.weight">
																						
																					</div> 
																				</td>
																				<td class="">
																					<select class="form-control" ng-model="field.frequentList" data-width="100%" ng-change="updateScenarioField(field.scenarioFieldId, 'frequentList', field.frequentList)" ng-if="{!license.features.frequentWords}">
																						<option value="">None</option>
																						<option value="STREET">Street</option>
																						<option value="COMMON">Common</option>
																						<option value="COMPANY">Company</option>
																						<option value="NAME">Person Names</option>
																						<option value="EMAIL">Email</option>
																						<option value="CUSTOM1">Custom 1</option>
																						<option value="CUSTOM2">Custom 2</option>
																					</select>
																					<span ng-if="{!NOT(license.features.frequentWords)}">None</span>
																				</td>
																				<td>
																					<select class="form-control" ng-model="field.matchMethod" data-width="100%" ng-change="updateScenarioField(field.scenarioFieldId, 'matchMethod', field.matchMethod)" ng-if="{!scoreMethods.size != 1}" >
																						<apex:repeat value="{!scoreMethods}" var="opt">
																							<option value="{!opt.value}">{!opt.label}</option>
																						</apex:repeat>
																					</select>
 																					<span ng-if="{!scoreMethods.size == 1}">
																						{!JSINHTMLENCODE(scoreMethods[0].label)}
																						
																					</span>
																				</td>
																				<td>
                                          <span ng-if="field.matchMethod == 'DATE_DISTANCE_DAYS'">
                                            <input class="form-control" type="number" string-to-number ng-model="field.matchConfig" ng-change="updateScenarioField(field.scenarioFieldId, 'matchConfig', field.matchConfig.toString())"/>
                                          </span>
                                          <span ng-if="field.matchMethod == 'HAS_VALUE'">
                                            <input class="form-control" type="text" maxlength="255" ng-model="field.matchConfig" ng-change="updateScenarioField(field.scenarioFieldId, 'matchConfig', field.matchConfig)"/>
                                          </span>
                                        </td>
                                        <td class="delete" width="20"><a href="#" class="s1utility s1utility-close" ng-click="deleteScenarioField(scenario.scenarioId, field.scenarioFieldId)"></a></td>
																			  
                                        </tr>
																	</tbody>
																</table>
															</li>
															<li>&nbsp;</li>
															<li>
																<div class="col-xs-12">
																	<a href="" class="btn btn-success add-field" ng-click="addScenarioField(scenario.scenarioId)">Add new field</a>
																</div>
															</li>
														</ul>
														
													</div>
													<!-- end card -->
										</div>
										<p>
											<a href="#" class="btn btn-success add-scenario" ng-click="addScenario()" ng-if="scenarioSize < {!license.features.scenarioCount}">Add new scenario</a>
										</p>
										<p>&nbsp;</p>
									</div>
								</div>
					</script>
					<apex:outputPanel layout="none" rendered="{!AND(configObject.isRecordType,license.features.recordType)}">
  					<script type="text/ng-template" id="recordtypes" data-record-type-config="{!$RemoteAction.dc3ControllerSetup.getRecordTypeConfig}">
  									<div class="row" ng-controller="recordTypeController" ng-init="endpoint.updateRecordTypeConfig='{!$RemoteAction.dc3ControllerSetup.updateRecordTypeConfig}'">
										<div class="col-xs-12">
											<div class="card-list">
												<div class="card-list-heading">
													<table class="table">
														<thead>
															<tr>
																<th class="col-xs-1">Record Type</th>
																
																<th class="col-xs-2">Scenario</th>
																<th class="col-xs-2">Match with</th>
															</tr>
														</thead>
													</table>
												</div>

												<div class="card">
													<div class="card-heading">
														<table class="table table-hover record-types">
															<tbody>
																
																	<tr ng-repeat="recordType in config.recordTypeConfig">
																		<td class="col-xs-1" ng-bind-html="recordType.name"></td>
																		<td class="col-xs-2">
																			<select selectpicker="selectpicker"  ng-change="updateConfig(recordType.recordTypeId, 'scenarioRecordType')" ng-model="recordType.scenarios" data-width="100%" multiple="multiple" ng-options="scenario.scenarioId as scenario.scenarioName for scenario in config.scenarioList" selectpicker-option="config.scenarioList">
																				<option value="1">None</option>	
																			</select>
																		</td>
																		<td class="col-xs-2">
																			<select selectpicker="selectpicker"  ng-change="updateConfig(recordType.recordTypeId, 'matchRecordType')" ng-model="recordType.matchWith" data-width="100%" multiple="multiple" ng-options="rt.recordTypeId as rt.Name for rt in config.recordTypeList" selectpicker-option="config.recordTypeList">
																				
																			</select>
																		</td>
																	</tr>
																
															</tbody>
														</table>
													</div>
												</div>
											</div>

										</div>
								</div>


  					</script>
  					</apex:outputPanel>
  					<script type="text/ng-template" id="settings" data-sf-getindexfieldlist="{!$RemoteAction.dc3ControllerSetup.getIndexFieldList}" data-sf-getrelatedmergeuniquelist="{!$RemoteAction.dc3ControllerSetup.getRelatedMergeUniqueList}" data-sf-getrelatedmergelist="{!$RemoteAction.dc3ControllerSetup.getRelatedMergeList}" data-settings="{!$RemoteAction.dc3ControllerSetup.getSettings}" data-index-object="{!$RemoteAction.dc3ControllerSetup.getIndexObject}">
  							<div class="alert alert-warning" role="alert" ng-if="{!NOT(objectMetaInformation.isSearchable)}">
                            	<apex:outputText value="{!objectMetaInformation.Label}"/>&nbsp;needs to have Advanced Matching enabled. Make sure the advanced matching is enabled and the Search Index has been created. Do you reguraly insert or update&nbsp;<apex:outputText value="{!objectMetaInformation.LabelPlural}"/>&nbsp;please install the <a href="https://support.duplicatecheck.com/article/setup-guide/configuring-standard-and-custom-objects#Step4" target="_BLANK">Apex Trigger</a> as well. 
                        	</div>
							<div class="row" ng-controller="settingsController" ng-init="endpoint.updateConfigField='{!$RemoteAction.dc3ControllerSetup.updateConfigField}'">
									<div class="col-xs-12">
										<div class="card-list">
											<div class="card-list-heading">
												<table class="table">
													<thead>
														<tr>
															<th class="col-xs-2">Setting</th>
															<th class="col-xs-2">Value</th>
														</tr>
													</thead>
												</table>
											</div>
											<div class="card">
												<div class="card-list-heading">

													<table class="table table-hover" ng-if="config">
														<tbody>
															
															<tr ng-if="{!license.features.advancedMatching}">
																<td class="col-xs-2">Advanced Matching</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('indexCreate')" selectpicker="selectpicker" data-width="100%" ng-model="config.indexCreate">
																		<option ng-selected="config.indexCreate" value="true">Enabled</option>
																		<option ng-selected="!config.indexCreate" value="false">Disabled</option>
																	</select>
																</td>
															</tr>
															
															
															<tr ng-if="{!license.features.crossObject}">
																<td class="col-xs-2">Cross Object Matching</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('crossObject')" selectpicker="selectpicker" data-width="100%" ng-model="config.crossObject">
																		<option ng-selected="config.crossObject" value="true">Enabled</option>
																		<option ng-selected="!config.crossObject" value="false">Disabled</option>
																	</select>
																</td>
															</tr>
															
															<tr ng-if="{!license.features.uniqueUpload}">
																<td class="col-xs-2">Unique Import</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('isDelta')" selectpicker="selectpicker" data-width="100%" ng-model="config.isDelta">
																		<option ng-selected="config.isDelta" value="true">Enabled</option>
																		<option ng-selected="!config.isDelta" value="false">Disabled</option>
																	</select>
																</td>
															</tr>

															<tr ng-if="{!configObject.objectPrefix == '00Q'}">
																<td class="col-xs-2">Quick Convert Status</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('leadConvertStatus')" selectpicker="selectpicker" data-width="100%" ng-model="config.leadConvertStatus" ng-options="item.MasterLabel as item.MasterLabel for item in config.convertStatusList">
																		
																	</select>
																</td>
															</tr>
															<tr ng-if="{!configObject.objectPrefix == '00Q'}">
																<td class="col-xs-2">Quick Convert Owner</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('leadConvertOwner')" selectpicker="selectpicker" data-width="100%" ng-model="config.leadConvertOwner">
																		<option value="LEAD">{!$ObjectType.Lead.Label} Owner</option>
																		<option value="ACCOUNT">{!$ObjectType.Account.Label} Owner</option>
																		<option value="CONTACT">{!$ObjectType.Contact.Label} Owner</option>
																		<option value="USER">Converting User</option>
																	</select>
																</td>
															</tr>

															
                              
                              <tr ng-if="{!AND(configObject.objectPrefix != '00Q', configObject.objectPrefix != '003', configObject.objectPrefix != '001P', configObject.objectPrefix != '001')}">
                                <td class="col-xs-2">Unique merge these related objects</td>
                                <td class="col-xs-2" ng-if="!meta.isMergeUniqueListLoading">
                                  <select ng-change="updateSetting('mergeUnique')" selectpicker="selectpicker" multiple="multiple" data-width="100%" ng-model="config.mergeUnique" selectpicker-option="meta.relatedMergeUniqueList" ng-options="rt.value as rt.label for rt in meta.relatedMergeUniqueList">

                                  </select>
                                </td>
                                <td class="col-xs-2" ng-if="meta.isMergeUniqueListLoading">
                                  Loading...
                                </td>
                              </tr>

															<tr ng-if="{!AND(configObject.objectPrefix != '00Q', configObject.objectPrefix != '003', configObject.objectPrefix != '001P', configObject.objectPrefix != '001')}">
																<td class="col-xs-2">Do not merge these related objects</td>
																<td class="col-xs-2" ng-if="!meta.isMergeListLoading">
																	<select ng-change="updateSetting('mergeDisable')" selectpicker="selectpicker" multiple="multiple" data-width="100%" ng-model="config.mergeDisable" selectpicker-option="meta.relatedMergeList" ng-options="rt.value as rt.label for rt in meta.relatedMergeList">

																	</select>
																</td>
                                <td class="col-xs-2" ng-if="meta.isMergeListLoading">
                                  Loading...
                                </td>
															</tr>
                              <tr>
                                <td class="col-xs-2">Clone Feed Items upon Merge</td>
                                <td class="col-xs-2">
                                  <select ng-change="updateSetting('mergeFeed')" selectpicker="selectpicker" data-width="100%" ng-model="config.mergeFeed">
                                    <option ng-selected="config.mergeFeed" value="true">Enabled</option>
                                    <option ng-selected="!config.mergeFeed" value="false">Disabled</option>
                                  </select>
                                </td>
                              </tr>
															<tr>
																<td class="col-xs-2">Enforce Sharing Rules and Field Level Security</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('enforceSharing')" selectpicker="selectpicker" data-width="100%" ng-model="config.enforceSharing">
																		<option ng-selected="config.enforceSharing" value="true">Enabled</option>
																		<option ng-selected="!config.enforceSharing" value="false">Disabled</option>
																	</select>
																</td>
															</tr>
															<tr>
																<td class="col-xs-2">Override CRUD when performing merge. All users can merge when they have read access to the record.</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('mergeOverride')" selectpicker="selectpicker" data-width="100%" ng-model="config.mergeOverride">
																		<option ng-selected="config.mergeOverride" value="true">Enabled</>
																		<option ng-selected="!config.mergeOverride" value="false">Disabled</>
																	</select>
																</td>
															</tr>
															<tr>
																<td class="col-xs-2">Chunk size in Duplicate Detection job</td>
																<td class="col-xs-2"><input ng-change="updateSetting('batchDedupChunkSize')" min="1" max="50" type="number" ng-model="config.batchDedupChunkSize" class="form-control" /></td>
															</tr>

									
															<tr ng-if="{!license.features.advancedMatching}">
																<td class="col-xs-2">Search Index with Wild Card</td>
																<td class="col-xs-2">
																	<select ng-change="updateSetting('indexWildcard')" selectpicker="selectpicker" data-width="100%" ng-model="config.indexWildcard">
																		<option ng-selected="config.indexWildcard" value="true">Enabled</option>
																		<option ng-selected="!config.indexWildcard" value="false">Disabled</option>
																	</select>
																</td>
															</tr>
															<tr ng-if="{!license.features.advancedMatching}">
																<td class="col-xs-2">Chunk size in Index Creation job</td>
																<td class="col-xs-2"><input ng-change="updateSetting('batchIndexChunkSize')" min="1" max="100" type="number" ng-model="config.batchIndexChunkSize" class="form-control" /></td>
															</tr>
															<tr ng-if="{!license.features.advancedMatching}">
																<td class="col-xs-2">Number of records returned in index search</td>
																<td class="col-xs-2"><input ng-change="updateSetting('indexQueryLimit')" min="1" max="100" type="number" ng-model="config.indexQueryLimit" class="form-control" /></td>
															</tr>
															<tr ng-if="{!license.features.advancedMatching}">
																<td class="col-xs-2">Index Location</td>
																<td class="col-xs-2" ng-if="!meta.isIndexFieldLoading">
																	<select ng-change="updateIndex()" selectpicker="selectpicker" data-width="100%" ng-model="config.indexField" selectpicker-option="meta.indexFieldList" ng-options="rt.value as rt.label for rt in meta.indexFieldList">
																		
																	</select>
																</td>
                                <td class="col-xs-2" ng-if="meta.isIndexFieldLoading">
                                  Loading...
                                </td> 
															</tr>
															<tr ng-if="{!license.features.advancedMatching} && index.showObject">
																<td class="col-xs-2">&nbsp;</td>
																<td class="col-xs-2">
																	<div class="row">
																		<div class="col-xs-4">
																			Index Field
																		</div>
																		<div class="col-xs-8">
																			<select ng-change="updateSetting('indexCustomIndexField')" selectpicker="selectpicker" data-width="100%" ng-model="config.indexCustomIndexField" selectpicker-option="index.selectValues.indexFields" ng-options="key as value for (key , value) in index.selectValues.indexFields">
																				
																			</select>
																		</div>
																	</div>
																	
																</td> 
															</tr>
															<tr ng-if="{!license.features.advancedMatching} && index.showObject">
																<td class="col-xs-2">&nbsp;</td>
																<td class="col-xs-2">
																	<div class="row">
																		<div class="col-xs-4">
																			Record Type Field
																		</div>
																		<div class="col-xs-8">
																			<select ng-change="updateSetting('indexCustomRecordTypeField')" selectpicker="selectpicker" data-width="100%" ng-model="config.indexCustomRecordTypeField" selectpicker-option="index.selectValues.recordTypeFields" ng-options="key as value for (key , value) in index.selectValues.recordTypeFields">
																				
																			</select>
																		</div>
																	</div>
																	
																</td> 
															</tr>
															
														</tbody>
													</table>

												</div> 
											</div>
										</div>

									</div>
								</div>  




  					</script>
  					<script type="text/ng-template" id="resultfields" data-sf-result-field="{!$RemoteAction.dc3ControllerSetup.getResultField}">
  					  <div class="row" ng-controller="resultFieldController" ng-init="endpoint.updateResultField='{!$RemoteAction.dc3ControllerSetup.updateResultField}'">
							<div class="col-xs-12"> 
								<div class="card-list">
									<div class="card-list-heading">
											Result Field
										<p class="h5">Drag and drop the fields you would like to be displayed in the result view in to the example Result View.</p>
									</div>
									<div class="card clearfix " >
										
											
											<div class="col-xs-6 mg-t-10 font-16">
													<input type="text" class="form-control" placeholder="filter" ng-model="fieldFilter"/>
													<div ui-sortable="sortableOptionsDrag" ng-model="data.fieldList" class="fieldDrag mg-b-10" id="fieldDrag">
														<span ng-repeat="field in data.fieldList">
															<span class="label label-drop label-info inline-block" data-field="{{field.value}}" ng-bind-html="field.label" />
														</span>
													</div>

											</div>
											
											<div class="col-xs-6 mg-t-10">
												<label class="col-xs-12">Header</label> 
												<div class="col-xs-12 font-16">
													
													<div class="dropzone dropzone-master" ui-sortable="sortableOptionsMaster" ng-model="data.headerList" id="masterList">
														<span ng-repeat="field in data.headerList">
															<span class="label label-drop label-info inline-block" data-field="{{field.value}}" ng-bind-html="field.label" />
														</span>
													</div>
												
												</div>
												<label class="col-xs-12">List Fields</label>
												<div class="col-xs-12 font-16" >
													<div class="dropzone dropzone-main" ui-sortable="sortableOptionsMain" ng-model="data.mainList" id="mainList">
														<div ng-repeat="field in data.mainList">
															<span class="label label-drop label-info inline-block" data-field="{{field.value}}" ng-bind-html="field.label" />
														</div>
													</div>
												</div>
											</div
									</div>
	
									
								</div>
							</div>
						</div>
  					</script>
  					<apex:outputPanel layout="none" rendered="{!license.features.crossObject}">	
  					<script type="text/ng-template" id="crossobject" data-sf-cross-config="{!$RemoteAction.dc3ControllerSetup.getCrossConfig}">
  					  <div class="row" ng-controller="crossController" ng-init="endpoint.deleteCrossObject='{!$RemoteAction.dc3ControllerSetup.deleteCrossObject}';endpoint.getCrossObjectFieldOptions='{!$RemoteAction.dc3ControllerSetup.getCrossObjectFieldOptions}';endpoint.getCrossObjectOptions='{!$RemoteAction.dc3ControllerSetup.getCrossObjectOptions}';endpoint.deleteCrossObjectField='{!$RemoteAction.dc3ControllerSetup.deleteCrossObjectField}';endpoint.insertUpdateCrossObjectField='{!$RemoteAction.dc3ControllerSetup.insertUpdateCrossObjectField}';">
									<div class="col-xs-12">
										<div class="card-list">
											<div class="card-list-heading">
												<table class="table table-hover">
													<thead>
														<tr>
															<th width="*">Cross Object</th>
															<th width="20"></th>
														</tr>
													</thead>
												</table>
											</div>
											
												<div class="card" ng-repeat="cross in config.crossConfig">
													<div class="card-heading">
														<table class="table table-hover">
															<tbody>
																<tr>
																	<td ng-click="open[cross.objectPrefix] = (open[cross.objectPrefix] ? false : true)" width="*" class="crossobjectCard"><i class="s1utility s1utility-{{open[cross.objectPrefix] ? 'down' : 'right'}}"></i><span ng-bind-html="cross.objectLabel"/></td>
																	<td width="20" class="delete"><a href="#" class="s1utility s1utility-close" ng-click="deleteObject(cross.objectPrefix)"></a></td>
																</tr>
															</tbody>

														</table>
													</div>
													<ul class="card-detail" ng-show="open[cross.objectPrefix]">
														<li>
															<table class="table">
																<thead>
																	<tr>
																		<th width="*"><apex:outputText value="{!configObject.objectLabel}" />&nbsp;Field</th>
																		<th width="*"><span ng-bind-html="cross.objectLabel"/>&nbsp;Field</th>
																		<th width="20"></th>
																	</tr>
																</thead>
																<tbody>
																		<tr ng-repeat="crossField in cross.fieldMapping">
																			<td>
																				<select selectpicker="selectpicker" data-width="100%" ng-change="updateField(cross.objectPrefix, $index)" ng-model="crossField.fromField" selectpicker-option="config.fieldSelect" ng-options="k as v for (k, v) in config.fieldSelect[configPrefix]">
																		
																				</select>
																			</td>
																			<td>
																				<select selectpicker="selectpicker" data-width="100%" ng-change="updateField(cross.objectPrefix, $index)" ng-model="crossField.toField" selectpicker-option="config.fieldSelect" ng-options="k as v for (k, v) in config.fieldSelect[cross.objectPrefix]">
																		
																				</select>
																			</td>
																			<td><a href="#" class="s1utility s1utility-close" ng-click="deleteField(cross.objectPrefix, $index)"></a></td>
																		</tr>
																</tbody>
															</table>
														</li>
														<li>&nbsp;</li>
														<li>
															<div class="col-xs-12">
																<a href="" class="btn btn-success" ng-click="addField(cross.objectPrefix)">Add Cross field</a>
															</div>
														</li>
													</ul>
												</div>
												<div class="card" ng-if="data.newObject">
													<div class="card-heading">
														<table class="table table-hover">
															<tbody>
																<tr>
																	<td width="*" class="crossobjectCard">
																		<select selectpicker="selectpicker" data-width="100%" ng-change="addObjectSelect()" ng-model="data.newObjectSelect" selectpicker-option="data.newObjectList" ng-options="item.objectPrefix as item.objectLabel for item in data.newObjectList">
																		 
																		</select></td>
																	
																</tr>
															</tbody>

														</table>
													</div>
												</div>






										</div>
										<p>
											<a href="#" class="btn btn-success " ng-click="addObject()">Add Cross Object</a>
										</p>
										<p>&nbsp;</p>

									</div>
								</div>
	

  					</script>
  					</apex:outputPanel>
  					<apex:outputPanel layout="none" rendered="{!OR(license.features.batchMerge,license.features.quickMerge,license.features.configuredMerge)}">
  					<script type="text/ng-template" id="merge" data-sf-merge="{!$RemoteAction.dc3ControllerSetup.getMergeConfig}">
  					  <div class="row" ng-controller="mergeController" ng-init="endpoint.updateMergeField='{!$RemoteAction.dc3ControllerSetup.updateMergeField}'; endpoint.updateConfigField='{!$RemoteAction.dc3ControllerSetup.updateConfigField}'">
									<div class="col-xs-12">
										<div class="card-list">
											<div class="card">
												<div class="card-heading">
													<table class="table table-condensed">
														<thead>
															<tr>
																<th class="col-xs-4">Master Record Rule</th>
																<th class="col-xs-4">&nbsp;</th>
																<th class="col-xs-4">&nbsp;</th>
																<!-- <th class="col-xs-2">Allow Empty Values</th> -->
															</tr>
														</thead>
													</table>
												</div>
												<div class="card-detail">
													<table class="table">
														<tbody>
															<tr>
																<td class="col-xs-4 v-middle">General Rule</td>
																<td class="col-xs-4 v-middle">
																	<select class="form-control" ng-change="updateGeneralMerge();" data-width="100%" ng-model="config.generalMergeRule" selectpicker-option="config.mergeRules" ng-options="rt.value as rt.label for rt in config.mergeRules | filter:'!GENERAL'">
																		
																	</select>
																	
																</td>
																<td class="col-xs-4 v-middle">
																	
																	
																	
																</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
															<tr ng-if="config.generalMergeRule == 'FIELD'">
																<td class="col-xs-4 v-middle">Field</td>
																<td class="col-xs-4 v-middle">
																	<select class="form-control" ng-change="updateGeneralMerge();" data-width="100%" ng-model="config.generalMergeField" selectpicker-option="config.mergeFields" ng-options="k as v.Label for (k, v) in config.fieldMeta">
																		
																	</select>
																</td>
																<td class="col-xs-4 v-middle">&nbsp;</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
															<tr ng-if="config.generalMergeRule == 'FIELD'">
																<td class="col-xs-4 v-middle">Field Rule</td>
																<td class="col-xs-4 v-middle">
																	<select class="form-control" ng-change="updateGeneralMerge();" data-width="100%" ng-model="config.generalMergeFieldRule" selectpicker-option="config.mergeFieldRules" ng-options="rt.value as rt.label for rt in config.mergeFieldRules">
																		
																	</select>
																</td>
																<td class="col-xs-4 v-middle">&nbsp;</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
															<tr ng-if="config.generalMergeRule == 'VALUE'">
																<td class="col-xs-4 v-middle">Field</td>
																<td class="col-xs-4 v-middle">
																	<select class="form-control" ng-change="selectFieldMerge()" data-width="100%" ng-model="config.generalMergeField" selectpicker-option="config.fieldMeta" ng-options="k as v.Label for (k, v) in config.fieldMeta">
																		
																	</select>
																</td>
																<td class="col-xs-4 v-middle">&nbsp;</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
															<tr ng-if="config.generalMergeRule == 'VALUE'">
																<td class="col-xs-4 v-middle">Field Value</td>
																<td class="col-xs-4 v-middle" ng-switch="filter.fieldType">
																	<select ng-switch-when="PICKLIST" class="form-control" data-width="100%" ng-model="config.generalMergeFieldValue" ng-change="updateGeneralMerge();" selectpicker-option="filter.fieldName" ng-options="pick.value as pick.label for pick in filter.selectList| orderBy:'label'"></select> 
																	<select ng-switch-when="MULTIPICKLIST" multiple="multiple" class="form-control" data-width="100%" ng-model="config.generalMergeFieldValue" ng-change="updateGeneralMerge();" selectpicker-option="filter.fieldName" ng-options="pick.value as pick.label for pick in filter.selectList| orderBy:'label'"></select>
																	<div ng-switch-when="REFERENCE">
																		<input class="form-control" typeahead-loading="loadingLocations" typeahead-wait-ms="500" typeahead-min-length="3" ng-model="config.generalMergeFieldLabel" typeahead-on-select="setLookup($item.id)" typeahead="related.name for related in getLookup($viewValue, filter.referenceTo)" type="text" /> <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
																	</div> 
																	<select ng-switch-when="BOOLEAN" class="form-control" data-width="100%" ng-model="config.generalMergeFieldValue" ng-change="updateGeneralMerge();">
																		<option value="true">True</option>
																		<option value="false">False</option>
																	</select> 
																	<input ng-switch-when="EMAIL" ng-model="config.generalMergeFieldValue" type="email" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="URL" ng-model="config.generalMergeFieldValue" type="url" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="PHONE" ng-model="config.generalMergeFieldValue" type="phone" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="CURRENCY" ng-model="config.generalMergeFieldValue" plautinumber="plautinumber" type="number" step="any" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="DOUBLE" ng-model="config.generalMergeFieldValue" plautinumber="plautinumber" type="number" step="any" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="INTEGER" ng-model="config.generalMergeFieldValue" plautinumber="plautinumber" type="number" step="any" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-when="PERCENT" ng-model="config.generalMergeFieldValue" plautinumber="plautinumber" type="number" step="any" class="form-control" ng-change="updateGeneralMerge();"/> 
																	<input ng-switch-default="ng-switch-default" ng-model="config.generalMergeFieldValue" type="text" ng-maxlength="filter.fieldLength" class="form-control" ng-change="updateGeneralMerge();"/>
																</td>
																<td class="col-xs-4 v-middle">&nbsp;</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
															<tr ng-if="config.generalMergeRule == 'FIELD' || config.generalMergeRule == 'VALUE'">
																<td colspan="3">&nbsp;</td>
															</tr>
															<tr ng-if="config.generalMergeRule == 'FIELD' || config.generalMergeRule == 'VALUE'">
																<td class="col-xs-4 v-middle">Fallback Rule</td>
																<td class="col-xs-4 v-middle">
																	<select class="form-control" ng-change="updateFallbackMerge();" data-width="100%" ng-model="config.fallbackMergeRule" selectpicker-option="config.mergeRules" ng-options="rt.value as rt.label for rt in config.mergeRules | filter:'!GENERAL' | filter:'!FIELD' | filter:'!VALUE'">
																		
																	</select>
																</td>
																<td class="col-xs-4 v-middle">&nbsp;</td>
																<!-- <td class="col-xs-2 v-middle">&nbsp;</td> -->
															</tr>
														</tbody>
													</table>
												</div>

											</div>
											
											<div class="card field-rules" ng-if="{!license.features.configuredMerge}">
												<div class="card-heading">
													<table class="table table-condensed">
														<thead>
															<tr>
																<th class="col-xs-4">Field Merge Rules</th>
																<th class="col-xs-4">Merge Rule</th>
																<th class="col-xs-4">Fallback Rule</th>
																<!-- <th class="col-xs-2">Allow Empty Values</th> -->
															</tr>
														</thead>
													</table>
													</div>
												<div class="card-detail">
													<table class="table table-hover">
														<tbody>
															
																<tr ng-repeat="mf in config.mergeFields">
																	<td class="col-xs-4 v-middle" ng-bind-html="mf.fieldLabel"></td>
																	<td class="col-xs-4 v-middle">
																		<select ng-disabled="mf.readOnly" class="form-control" ng-change="fieldChange(mf.fieldName)" data-width="100%" ng-model="mf.mergeRule" selectpicker-option="fieldSelect" ng-options="s.name.value as s.name.label group by s.type for s in fieldSelect">
																			
																		</select>
																		
																	</td>
																	<td class="col-xs-4 v-middle">
																		<select ng-disabled="mf.readOnly" class="form-control" ng-change="fieldChange(mf.fieldName)" data-width="100%" ng-model="mf.fallbackRule" selectpicker-option="config.fallbackRules" ng-options="rt.value as rt.label for rt in config.fallbackRules">
																		
																		</select>
																	</td>
																	<!-- <td class="col-xs-2 v-middle text-center">
																		<input ng-disabled="mf.readOnly" type="checkbox" ng-change="fieldChange(mf.fieldName)" ng-model="mf.allowEmpty" />
																	</td> -->
																</tr>
														</tbody>
													</table>
												</div>
											</div>
											
										</div>

									</div>
								</div>
  					</script>
  					</apex:outputPanel>
  					
  					<apex:outputPanel layout="none" rendered="{!license.features.directProcessing}" >
  					<script type="text/ng-template" id="direct" data-settings="{!$RemoteAction.dc3ControllerSetup.getSettings}" >
						<div class="row" ng-controller="directController" ng-init="endpoint.updateConfigField='{!$RemoteAction.dc3ControllerSetup.updateConfigField}'">
									<div class="col-xs-12">
										<div class="card-list" >
											<div class="card-list-heading">
												<table class="table">
													<thead>
														<tr>
															<th class="col-xs-6">Setting</th>
															<th class="col-xs-6">Value</th>
														</tr>
													</thead>
												</table>
											</div>
											<div class="card" ng-if="config">
												<div class="card-heading">
													<table class="table table-hover">
														<tbody>
															
															<tr >
																<td class="col-xs-6">Apply direct <strong>convert</strong> on</td>
																<td class="col-xs-6">
																	<select ng-change="updateSetting('directConvertOn')" selectpicker="selectpicker" multiple="multiple" data-width="100%" ng-model="config.directConvertOn" >
																		<option value="onInsert">Api/Apex Insert</option>
																		<option value="onUpdate">Api/Apex Update</option>
																		<option value="onUpload">Unique Import</option>
																		<option value="onWeb2Lead" ng-if="configPrefix == '00Q'">Web2Lead</option>
																		<option value="onApi">DC Api</option>
																	</select>
																</td>
															</tr>
															<tr >
																<td class="col-xs-6">Direct <strong>convert</strong> with the Convert Status</td>
																<td class="col-xs-6">
																	<select ng-change="updateSetting('directConvertStatus')" selectpicker="selectpicker" data-width="100%" ng-model="config.directConvertStatus" ng-options="item.MasterLabel as item.MasterLabel for item in config.convertStatusList">
																		
																	</select>
																</td>
															</tr>
															<tr >
																<td class="col-xs-6">Direct <strong>convert</strong> if score is equal or higher</td>
																<td class="col-xs-6"><div class="row">
																	<div class="col-xs-2"><span ng-bind-html="config.directConvertThreshold"/>%</div>
																	<div class="col-xs-10"><input slider="slider"  type="text" data-slider-min="1" data-slider-max="100" data-slider-step="1" tooltip="hide" value="{{config.directConvertThreshold}}" ng-stop="updateSetting('directConvertThreshold')" ng-model="config.directConvertThreshold"/></div>
																	</div>
																</td>
															</tr>
														</tbody>
													</table>
												</div>

												
											</div>
											<div class="card" ng-if="config">
												<div class="card-heading">
													<table class="table table-hover">
														<tbody>
															<tr >
																<td class="col-xs-6">Apply direct <strong>merge</strong> on</td>
																<td class="col-xs-6">
																	<select ng-change="updateSetting('directMergeOn')" selectpicker="selectpicker" multiple="multiple" data-width="100%" ng-model="config.directMergeOn">
																		<option value="onInsert">Api/Apex Insert</option>
																		<option value="onUpdate">Api/Apex Update</option>
																		<option value="onUpload">Unique Import</option>
																		<option value="onWeb2Lead" ng-if="configPrefix == '00Q'">Web2Lead</option>
																		<option value="onApi">DC Api</option>
																	</select>
																</td>
															</tr>
															<tr >
																<td class="col-xs-6">Direct <strong>merge</strong> if score is equal or higher</td>
																<td class="col-xs-6"><div class="row">
																	<div class="col-xs-2"><span ng-bind-html="config.directMergeThreshold"/>%</div>
																	<div class="col-xs-10"><input slider="slider"  type="text" data-slider-min="1" data-slider-max="100" data-slider-step="1" tooltip="hide" value="{{config.directMergeThreshold}}" ng-stop="updateSetting('directMergeThreshold')" ng-model="config.directMergeThreshold"/></div>
																	</div>
																</td>
															</tr>
															

															
														</tbody>
													</table>
												</div>

												
											</div>
										</div>

									</div>
								</div>  
	
						

					</script>
  					</apex:outputPanel>
  					
  					<apex:outputPanel layout="none" rendered="{!license.features.advancedMatching}">
  					<script type="text/ng-template" id="index" data-sf-job-list="{!$RemoteAction.dc3ControllerSetup.getJobListByPage}">
  						<div class="alert alert-warning" role="alert" ng-if="{!NOT(objectMetaInformation.isSearchable)}">
                            <apex:outputText value="{!objectMetaInformation.Label}"/>&nbsp;needs to have Advanced Matching enabled. Make sure the advanced matching is enabled and the Search Index has been created. Do you reguraly insert or update&nbsp;<apex:outputText value="{!objectMetaInformation.LabelPlural}"/>&nbsp;please install the <a href="https://support.duplicatecheck.com/article/setup-guide/configuring-standard-and-custom-objects#Step4" target="_BLANK">Apex Trigger</a> as well. 
                        </div>
						<div class="row" ng-controller="indexController" ng-init="endpoint.abortJob='{!$RemoteAction.dc3ControllerSetup.abortJob}'; endpoint.startIndexJob='{!$RemoteAction.dc3ControllerSetup.startIndexJob}'; endpoint.deleteIndexJob='{!$RemoteAction.dc3ControllerSetup.deleteIndexJob}'">
									<div class="col-xs-12">
										<div class="card">
											<div class="card-heading"></div>
											<div class="card-detail padding-top-15">
 


												<div class="col-xs-12">
													
														<button href="#" class="btn btn-success" ng-click="startIndex()" ng-if="indexCreate">Create Index</button>
														<button href="#" class="btn btn-danger " ng-click="deleteIndex()">Delete Index</button>
														<br />
														<br />
														<table class="table table-hover table-striped" id="indexJobs">
															<thead>
																<tr>

																	<th>Name</th>
																	<th class="col-xs-1">Object</th>
																	<th class="col-xs-1">Progress</th>
																	<th class="col-xs-2">Started</th>
																	<th class="col-xs-2">Ended</th>
																	<th class="col-xs-2">&nbsp;</th>
																</tr>
															</thead>
															<tbody>
																
																	<tr ng-repeat="job in jobList">

																		<td ng-bind-html="job.jobName"></td>
																		<td ng-bind-html="job.sourceObjectLabel"></td>
																		<td>
																			<div class="progress processing active" ng-show="{{job.status == 'Processing'}}">
                                                  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="{{job.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{job.progress}}%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Aborted'}}">
                                                  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="{{job.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{job.progress}}%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Holding'}}">
                                                  <div class="progress-bar progress-bar-grey" role="progressbar" aria-valuenow="{{job.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{job.progress}}%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Queued'}}">
                                                  <div class="progress-bar progress-bar-grey progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Preparing'}}">
                                                  <div class="progress-bar progress-bar-grey progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Completed'}}">
                                                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{job.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{job.progress}}%;"></div>
                                                </div>
                                                
                                                <div class="progress" ng-show="{{job.status == 'Failed'}}">
                                                  <div class="progress-bar  progress-bar-danger" role="progressbar" aria-valuenow="{{job.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{job.progress}}%;"></div>
                                                </div>
																		</td>
																		<td ng-bind-html="job.startDateFormat"></td>
																		<td ng-bind-html="job.endDateFormat"></td>
																		<td class="text-right actions"><a href="" class="btn btn-xs btn-primary" ng-click="abortJob(job.jobId);" ng-show="job.status == 'Processing' || job.status == 'Holding' || job.status == 'Queued' || job.status == 'Preparing'">Abort</a></td>

																	</tr>

																

															</tbody>
														</table>
														<div class="row">
															<div class="col-xs-12 text-center">
																<pagination total-items="totalItems" ng-model="currentPage" max-size="5" class="pagination-sm" ng-change="getJobList()" boundary-links="true"></pagination>
															</div>
														</div>
												</div>
												


												<div class="clearfix"></div>


											</div>
								
										</div>
									</div>
								</div>
  					</script>
  					</apex:outputPanel>
					
				
					<div class="col-md-10">
						
						
					
						<tabsetlazy>
				          <tablazy title="Scenarios" template-url="scenario"></tablazy>
				          
				          <apex:outputPanel layout="none" rendered="{!AND(configObject.isRecordType,license.features.recordType)}">
				          	<tablazy title="Record Types" template-url="recordtypes"></tablazy>
				          </apex:outputPanel>
				          
				          <tablazy title="{!configObject.objectLabel} Settings" template-url="settings"></tablazy>
				          <tablazy title="Result Fields" template-url="resultfields"></tablazy>
						  
						  <apex:outputPanel layout="none" rendered="{!license.features.crossObject}">				         
				          	<tablazy title="Cross Object" template-url="crossobject"></tablazy>
				          </apex:outputPanel>
				          
				          <apex:outputPanel layout="none" rendered="{!OR(license.features.batchMerge,license.features.quickMerge,license.features.configuredMerge)}">
				          	<tablazy title="Merge" template-url="merge"></tablazy>
				          </apex:outputPanel>
				          
				          <apex:outputPanel layout="none" rendered="{!license.features.directProcessing}">
				          	<tablazy title="Direct" template-url="direct"></tablazy>
				          </apex:outputPanel>
				          
				          <apex:outputPanel layout="none" rendered="{!license.features.advancedMatching}">
				          	<tablazy title="Search Index" template-url="index" ></tablazy>
				          </apex:outputPanel>
				          
				        </tabsetlazy>
					
					</div>
				
				
				

					
				</apex:outputPanel>


			</div>
		</div>


	</div>
</apex:page>