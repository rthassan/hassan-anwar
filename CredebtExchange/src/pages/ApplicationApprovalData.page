<apex:page sidebar="false" standardController="Application__c" extensions="ApplicationDataController" >
    <apex:stylesheet value="{!$Resource.AppProcessStyle}"/>
    
    <body>
        
        <div class="form-container">
            <div class="inner-wrapper">
                <apex:form > 
                    <div class="slds-scope">
                        <br/><br/>
                        <div> <!-- Application__c.id URLFOR($Action.Account.view,Originator.id) -->
                            <a href="/{!Application__c.id}" target="_blank">View Application</a>
                            <a href="/{!Originator.id}" target="_blank">View Organisation</a>
                            <a href="/{!opp.id}" target="_blank">View Opportunity</a>
                            <!--<apex:commandLink value="View Application" action="{!redirect1}"  /> &nbsp;&nbsp;
<apex:commandLink value="View Organisation" action="/{!Originator.id}" target="_blank"/> &nbsp;&nbsp;
<apex:commandLink value="View Opportunity" action="/{!opp.id}" target="_blank"/> &nbsp;&nbsp;-->
                        </div>
                        <br/><br/>
                        <apex:pageBlock >
                            
                            <apex:pageBlockSection columns="2" title="Organisation Details">
                                
                                <apex:outputField styleClass="uiOutputText" value="{!originator.Credit_Insurer__c}" label="Our current credit Insurance provider is"/>
                                <apex:outputField value="{!originator.website}" label="Website"/>
                                <apex:outputField value="{!originator.IDF_Provider__c}" label="Our current invoice discounting provider is"/>
                                <apex:outputField value="{!originator.Company_Registration_Number__c}" label="Company Number"/>
                                <apex:outputField value="{!originator.name}" label="Organisation Name"/>
                                <apex:outputField value="{!originator.VAT_Number__c}" label="VAT Number"/>
                                <apex:outputField value="{!originator.Trading_Name__c}" label="Organisation Trade Name"/>
                                <apex:outputField value="{!originator.Company_Structure__c}" label="Organisation Type"/>
                                <apex:outputField value="{!originator.NumberOfEmployees}" label="Total Employees"/>
                                <apex:outputField value="{!originator.Number_of_Directors__c}" label="Number of Directors" />
                                <apex:outputField value="{!originator.Country_of_Registration__c}" label="Country of Registration"/> 
                                <apex:outputField value="{!originator.PPSN_Tax_Reference_Number__c}" label="PPSN or Tax Reference Number"/> 
                                <apex:outputField value="{!originator.Revenue_Access_Number__c}" label="Revenue Access Number"/> 
                                <apex:outputField label="Fiscal Year End Date (MM-DD)" value="{!originator.Fiscal_Year_End__c}" />
                                <apex:outputField value="{!originator.Bank_Account_Number_Fast_Trading__c}" label="Bank Account Number (Fast Trading)" />
                                <apex:outputField value="{!originator.SWIFT_BIC_Fast_Trading__c}" label="SWIFT/BIC (Fast Trading)" />
                                <apex:outputField value="{!originator.Referral_Bank_Account_Number__c}" label="Referral Bank Account Number" />
                                <apex:outputField value="{!originator.Referral_Swift_Bic__c}" label="Referral SWIFT/BIC" />
                            </apex:pageBlockSection>
                            
                            <apex:pageBlockSection columns="2" title="Billing Practices">
                                <apex:outputField value="{!originator.Rebates_Discounts_or_other_Incentives__c}" label="Do you offer any rebates, discounts or other incentives to customers?" />
                                <apex:outputField value="{!originator.Customers_pay_Percentage__c}" label="Do your customers pay for percentage of work contracted as opposed 
                                                        to actual work completed / delivered?" />
                                <apex:outputField value="{!originator.Invoice_on_Consignment__c}" label="Do you ever invoice on consignment?" />
                                <apex:outputField value="{!originator.Offer_Warranties__c}" label="Do you offer any warranties?" />
                                <apex:outputField value="{!originator.Offer_Return_Rights__c}" label="Do you offer any return rights?" />
                                <apex:outputField value="{!originator.Accounting_Software__c}" label="Are you using any Accounting Software?" />
                                
                            </apex:pageBlockSection>
                            
                            <apex:variable value="{!1}" var="rowNum"/>
                            <apex:pageBlockSection title="Directors" columns="1">
                                
                                <apex:repeat value="{!DirectorList}" var="director">
                                    
                                    <apex:pageBlockSection title="Director {!FLOOR(rowNum)}" columns="2" collapsible="false">
                                        <apex:outputField value="{!director.FirstName}" label="First Name"/>
                                        <apex:outputField value="{!director.MailingStreet}" label="Street"/>
                                        <apex:outputField value="{!director.LastName}" label="Last Name"/>
                                        <apex:outputField value="{!director.MailingCity}" label="City"/>
                                        <apex:outputField value="{!director.MobilePhone}" label="Mobile Phone"/>
                                        <apex:outputField value="{!director.MailingPostalCode}" label="Area/Postal Code"/>
                                        <apex:outputField value="{!director.Email}" label="Email"/>
                                        <apex:outputField value="{!director.MailingState}" label="County/Province"/>
                                        <apex:outputField value="{!director.MailingCountry}" label="Country"/>
                                        <apex:variable var="rowNum" value="{!rowNum + 1}"/>
                                    </apex:pageBlockSection>
                                    
                                </apex:repeat>
                                
                            </apex:pageBlockSection>
                            
                            
                            <apex:pageBlockSection title="Bank Details" columns="2">
                                <apex:outputField label="Bank Name" value="{!BankAccountInformation.Bank__c}"/>
                                <apex:outputField value="{!BankAccountInformation.Name}" label="Bank Account Name" />
                                <apex:outputField value="{!BankAccountInformation.Bank_Account_Number__c}" label="Bank Account Number"/>
                                <apex:outputField value="{!BankAccountInformation.Sort_Code__c}" label="Sort Code"/>
                                <apex:outputField value="{!BankAccountInformation.IBAN_Number__c}" label="IBAN Number"/>
                                <apex:outputField value="{!BankAccountInformation.Swift_Code__c}" label="Swift Code"/>
                                <apex:outputField value="{!BankAccountInformation.CurrencyIsoCode}" label="Currency"/>
                            </apex:pageBlockSection>
                            
                            <apex:pageBlockSection title="Credebtors" columns="1">
                                
                                <apex:pageBlockTable value="{!AppCredebtors}" var="c">
                                    
                                    <apex:column headerValue="Type" value="{!c.Mtype}" />
                                    <apex:column headerValue="Company No" value="{!c.companynumber}" />
                                    <apex:column headerValue="Credebtor" value="{!c.credebtorname}" />
                                    <apex:column headerValue="Amount" value="{!c.amount}" />
                                    <apex:column headerValue="DSO" value="{!c.dso}" />
                                    <apex:column headerValue="Risk" value="{!c.risk}" />
                                    <apex:column headerValue="Limit" value="{!c.climit}" />
                                    
                                </apex:pageBlockTable>
                                
                            </apex:pageBlockSection>
                            
                            <apex:pageBlockButtons rendered="{!(Application__c.Stage__c != 'Trade Desk Approved' && Application__c.Stage__c != 'Closed Lost')}" >
                                <apex:commandButton value="Approve" action="{!Approve}" />
                                <apex:commandButton value="Reject" action="{!Reject}" />
                                &nbsp;&nbsp;
                            </apex:pageBlockButtons>
                            
                        </apex:pageBlock>
                    </div>
                    
                </apex:form>
            </div>
        </div>
        <apex:include pageName="FooterPage"/>
    </body>
</apex:page>