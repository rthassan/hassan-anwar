<apex:page controller="ConvertCreditorController"  >
    <apex:stylesheet value="{!$Resource.AppProcessStyle}"/>
    
    <body>
        
        <div class="form-container">
            <div class="inner-wrapper">
                <div class="slds-scope">
                    <apex:form >
                        <apex:Pagemessages />
                        <apex:pageBlock title="Existing Master Credebtors" rendered="{!isCreditorExist}" >
                            <div style="text-align:center;font-size: 15px;">
                                <apex:outputText value="Master Credebtor with same Company Name and Company Registeration Number already exists in the system." />
                            </div>
                            <br/>
                            <apex:pageBlockTable value="{!ExistingCreditor}" var="excred" title="Existing Master Credebtors">
                                <apex:column headerValue="Name">
                                    <apex:commandLink value="{!excred.Name}" action="/{!excred.Id}" target="blank" />
                                </apex:column>
                                <apex:column value="{!excred.Company_Registration_Number__c}"/>
                                
                                <apex:column headerValue="Action">
                                    <apex:commandLink value="Link & Convert Creditor" action="{!convertCreditor}">
                                        <apex:param name="accIdParam" value="{!excred.Id}" assignTo="{!accIdChosen}"/>
                                        <apex:param name="linkCreditorwithMaster" value="true" assignTo="{!linkCreditorwithMaster}"/>
                                    </apex:commandLink>
                                </apex:column>
                            </apex:pageBlockTable>
                            
                            <br/>
                            
                            <apex:commandButton action="{!convertCreditor}" value="New Master Credebtor" reRender="hiddenblock">
                                <apex:param name="createNewMaster" value="true" assignTo="{!createNew}"/>
                            </apex:commandButton>
                            
                            <apex:pageBlock id="hiddenBlock" rendered="false"></apex:pageBlock>
                            
                        </apex:pageBlock>
                        
                        
                        <apex:pageBlock title="Convert Approved Creditor" >
                            
                            <apex:pageBlockButtons >
                                <apex:commandButton action="{!convertCreditor}" value="Convert Creditor" rendered="{!isCreditorExist == false}"/>
                                
                            </apex:pageBlockButtons>
                            
                            <apex:pageBlockSection title="Creditor Details" columns="2">
                                <apex:outputField value="{!Creditor.Name}" label="Creditor Company Name"/>
                                <apex:outputField value="{!Creditor.Company_Number__c}" label="Company Registration Number"/>
                                <apex:outputField value="{!Creditor.CurrencyIsoCode}" label="Currency" />
                                <apex:outputField value="{!Creditor.Trading_Name__c}" label="Trading Name"/>
                                <apex:outputField value="{!Creditor.Previous_Name__c}" label="Previous Name"/>
                                <apex:outputField value="{!Creditor.Email__c}" label="Contact Email" />
                                <apex:outputField value="{!Creditor.Direct_Dial_Phone__c}" label="Contact Direct Dial Phone" />
                                <apex:outputField value="{!Creditor.Originator__c}" label="Originator" />
                            </apex:pageBlockSection>   
                        </apex:pageBlock>      
                    </apex:form>
                </div>
            </div>
        </div>
    </body>
    
    
</apex:page>