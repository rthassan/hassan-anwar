<apex:page controller="ConvertDebtorController"  >
    <apex:stylesheet value="{!$Resource.AppProcessStyle}"/>
    
    <body>
        
        <div class="form-container">
            <div class="inner-wrapper">
                <div class="slds-scope">
                    
                    <apex:form >
                        <apex:Pagemessages />
                        <apex:pageBlock title="Existing Master Credebtors" rendered="{!isDebtorExist}" >
                            <div style="text-align:center;font-size: 15px;">
                                <apex:outputText value="Master Credebtor with same Company Name and Company Registeration Number already exists in the system." />
                            </div>
                            <br/>
                            <apex:pageBlockTable value="{!ExistingDebtor}" var="exdeb" title="Existing Master Credebtors">
                                <apex:column headerValue="Name">
                                    <apex:commandLink value="{!exdeb.Name}" action="/{!exdeb.Id}" target="blank" />
                                </apex:column>
                                <apex:column value="{!exdeb.Company_Registration_Number__c}"/>
                                
                                <apex:column headerValue="Action">
                                    <apex:commandLink value="Link & Convert Debtor" action="{!convertDebtor}">
                                        <apex:param name="accIdParam" value="{!exdeb.Id}" assignTo="{!accIdChosen}"/>
                                        <apex:param name="linkDebtorwithMaster" value="true" assignTo="{!linkDebtorwithMaster}"/>
                                    </apex:commandLink>
                                </apex:column>
                            </apex:pageBlockTable>
                            
                            <br/>
                            
                            <apex:commandButton action="{!convertDebtor}" value="New Master Credebtor" reRender="hiddenblock">
                                <apex:param name="createNewMaster" value="true" assignTo="{!createNew}"/>
                            </apex:commandButton>
                            
                            <apex:pageBlock id="hiddenBlock" rendered="false"></apex:pageBlock>
                        </apex:pageBlock>
                        
                        <apex:pageBlock title="Convert Approved Debtor" >
                            
                            <apex:pageBlockButtons >
                                <apex:commandButton action="{!convertDebtor}" value="Convert Debtor" rendered="{!isDebtorExist == false}" />
                            </apex:pageBlockButtons>
                            
                            <apex:pageBlockSection title="Debtor Details" columns="2">
                                
                                <apex:outputField value="{!Debtor.Name}" label="Debtor Company Name"/>
                                <apex:outputField value="{!Debtor.Company_Number__c}" label="Company Registration Number"/>
                                <apex:outputField value="{!Debtor.CurrencyIsoCode}" label="Currency" />
                                <apex:outputField value="{!Debtor.Trading_Name__c}" label="Trading Name"/>
                                <apex:outputField value="{!Debtor.Previous_Name__c}" label="Previous Name"/>
                                <apex:outputField value="{!Debtor.Email__c}" label="Contact Email" />
                                <apex:outputField value="{!Debtor.Direct_Dial_Phone__c}" label="Contact Direct Dial Phone" />
                                <apex:outputField value="{!Debtor.Originator__c}" label="Originator" />
                            </apex:pageBlockSection>
                            
                        </apex:pageBlock>
                        
                    </apex:form>
                </div>
            </div>
        </div>
    </body>
</apex:page>